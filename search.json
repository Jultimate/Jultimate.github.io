[{"title":"Builder Pattern","url":"/2021/12/13/Builder-Pattern/","content":"<p>å¼€å§‹å»ºé€ ä¸€è‰˜èˆªç©ºæ¯èˆ°å§</p>\n<h2 id=\"AircraftCarrier\"><a href=\"#AircraftCarrier\" class=\"headerlink\" title=\"AircraftCarrier\"></a>AircraftCarrier</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AircraftCarrier</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">String</span> classes <span class=\"token operator\">=</span> <span class=\"token string\">\"Nimitz\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">String</span> propulsion <span class=\"token operator\">=</span> <span class=\"token string\">\"194MW\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">String</span> aircraft <span class=\"token operator\">=</span> <span class=\"token string\">\"F/A-18\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">String</span> power <span class=\"token operator\">=</span> <span class=\"token string\">\"nuclear\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">String</span> displacement <span class=\"token operator\">=</span> <span class=\"token string\">\"102820t\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>é€ å°±è¦é€ è‰˜å¤§çš„ï¼Œæ¥è‰˜10Wå¨çº§çš„ï¼Œä»¥ä¸Šèˆªæ¯èµ„æ–™æ¥æºäºç»´åŸºç™¾ç§‘(*ï¿£3ï¿£)â•­</p>\n<h2 id=\"Builder\"><a href=\"#Builder\" class=\"headerlink\" title=\"Builder\"></a>Builder</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Builder</span> \n<span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token keyword\">static</span> <span class=\"token class-name\">AircraftCarrier</span> aircraftCarrier <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AircraftCarrier</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">AircraftCarrier</span> <span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> aircraftCarrier<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Builder</span> <span class=\"token function\">classes</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> classes<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        aircraftCarrier<span class=\"token punctuation\">.</span>classes <span class=\"token operator\">=</span> classes<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Builder</span> <span class=\"token function\">propulsion</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> propulsion<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        aircraftCarrier<span class=\"token punctuation\">.</span>propulsion <span class=\"token operator\">=</span> propulsion<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Builder</span> <span class=\"token function\">aircraft</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> aircraft<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        aircraftCarrier<span class=\"token punctuation\">.</span>aircraft <span class=\"token operator\">=</span> aircraft<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Builder</span> <span class=\"token function\">power</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> power<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        aircraftCarrier<span class=\"token punctuation\">.</span>power <span class=\"token operator\">=</span> power<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Builder</span> <span class=\"token function\">displacement</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> displacement<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        aircraftCarrier<span class=\"token punctuation\">.</span>displacement <span class=\"token operator\">=</span> displacement<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"BuilderTest\"><a href=\"#BuilderTest\" class=\"headerlink\" title=\"BuilderTest\"></a>BuilderTest</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BuilderTest</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">AircraftCarrier</span> builder <span class=\"token operator\">=</span> <span class=\"token class-name\">Builder</span><span class=\"token punctuation\">.</span><span class=\"token function\">classes</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Kuznetsov\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">aircraft</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"J-15\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">propulsion</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"150MW\"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">displacement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"67500t\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">power</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Steam turbines\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>builder<span class=\"token punctuation\">.</span>displacement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>é€šè¿‡å»ºé€ è€…æ¨¡å¼ï¼Œä½¿ç”¨é“¾å¼ç¼–ç¨‹å®Œæˆäº†ä¸€è‰˜è¾½å®èˆ°çš„å»ºé€ ï¼Œå¦‚æœéœ€è¦å°¼ç±³å…¹çº§ï¼Œåªéœ€è¦<code>Builder.builder()</code>å°±å¯ä»¥äº†ã€‚<br><br>ä½¿ç”¨å»ºé€ è€…æ¨¡å¼å¯ä»¥å®Œæˆç¤ºä¾‹ä¸­çš„é“¾å¼ç¼–ç¨‹ï¼Œåœ¨åˆ›å»ºå¤æ‚å¯¹è±¡æ—¶ç‰¹åˆ«æ–¹ä¾¿ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¸éœ€è¦ç»™æ¯ä¸ªå±æ€§éƒ½èµ‹å€¼ï¼ˆæœ‰é»˜è®¤å€¼ï¼‰ï¼Œè¿™æ˜¯å»ºé€ è€…æ¨¡å¼çš„ä¼˜ç‚¹å°±ä½“ç°å‡ºæ¥äº†ï¼Œç‰¹åˆ«æ–¹ä¾¿ã€‚</p>\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","åˆ›å»ºå‹æ¨¡å¼"]},{"title":"Composite Pattern","url":"/2021/12/10/Composite-Pattern/","content":"<p>ç»„åˆæ¨¡å¼æ˜¯ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œå…¶å®å°±æ˜¯å°†å¯¹è±¡ç»„åˆæˆæ ‘çŠ¶ç»“æ„ã€‚<br><br>åœ¨ç½‘ä¸Šå•†åŸä¸­ï¼Œé€šå¸¸ä¼šæœ‰å¤šçº§åˆ†ç±»ï¼Œè¿™äº›åˆ†ç±»å°±å¯ä»¥ç”¨ç»„åˆæ¨¡å¼æ¥ç»„åˆä¸ºæ ‘å½¢ç»“æ„ã€‚</p>\n<h2 id=\"Category\"><a href=\"#Category\" class=\"headerlink\" title=\"Category\"></a>Category</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Category</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Category</span><span class=\"token punctuation\">></span></span> categorys <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Category</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Category</span> category<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        categorys<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CategoryRoot</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Category</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">CategoryRoot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ROOT\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Category1</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Category</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Category1</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Category2</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Category</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Category2</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Category3</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Category</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Category3</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"CategoryTree\"><a href=\"#CategoryTree\" class=\"headerlink\" title=\"CategoryTree\"></a>CategoryTree</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CategoryTree</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">tree</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Category</span> category<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> depth<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i <span class=\"token operator\">&lt;</span> depth<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"== \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Category</span> childCategory <span class=\"token operator\">:</span> category<span class=\"token punctuation\">.</span>categorys<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">tree</span><span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">,</span> depth <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"TreeTest\"><a href=\"#TreeTest\" class=\"headerlink\" title=\"TreeTest\"></a>TreeTest</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TreeTest</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">Category</span> category <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CategoryRoot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Category1</span> category1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Category1</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BOOK\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        category<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>category1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Category2</span> category21 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Category2</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"PROGRAM\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Category2</span> category22 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Category2</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"NOVEL\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        category1<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>category21<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        category1<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>category22<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Category3</span> category31 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Category3</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"OpreatingSystems\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Category3</span> category32 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Category3</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"C_Primer_PLUS\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        category21<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>category31<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        category21<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>category32<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Category3</span> category33 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Category3</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"JaneErye\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Category3</span> category34 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Category3</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Ulysses\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        category22<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>category33<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        category22<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>category34<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">CategoryTree</span><span class=\"token punctuation\">.</span><span class=\"token function\">tree</span><span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"æµ‹è¯•ç»“æœ\"><a href=\"#æµ‹è¯•ç»“æœ\" class=\"headerlink\" title=\"æµ‹è¯•ç»“æœ\"></a>æµ‹è¯•ç»“æœ</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">ROOT\n&#x3D;&#x3D; BOOK\n&#x3D;&#x3D; &#x3D;&#x3D; PROGRAM\n&#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; OpreatingSystems\n&#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; C_Primer_PLUS\n&#x3D;&#x3D; &#x3D;&#x3D; NOVEL\n&#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; JaneErye\n&#x3D;&#x3D; &#x3D;&#x3D; &#x3D;&#x3D; Ulysses<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","ç»“æ„å‹æ¨¡å¼"]},{"title":"Adapter Pattern","url":"/2021/12/13/Adapter-Pattern/","content":"<p><code>java.util.concurrent</code>åŒ…ä¸‹çš„<code>RunnableAdapter</code>å°±æ˜¯é€‚é…å™¨ç±»ï¼Œç”¨äºå°†<code>Runnable</code>è½¬åŒ–ä¸º<code>Callable</code><br><br>Adapterç”¨äºå°†ä¸åŒç±»å‹çš„æ¥å£è¿›è¡Œè½¬æ¢ï¼ŒSpringMVCä¸­çš„<code>HandlerAdapter</code>å°±æ˜¯é€‚é…å™¨ã€‚<br></p>\n<p>ç°åœ¨çš„è½»è–„æœ¬ä¸ºäº†èŠ‚çœé‡é‡ï¼Œéƒ½å»æ‰äº†RJ45ç½‘çº¿æ¥å£ï¼Œå¦‚æœåœ¨æ²¡æœ‰WIFIçš„ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬åªèƒ½ä½¿ç”¨è½¬æ¥å¤´æ¥è¿æ¥ç½‘çº¿ã€‚</p>\n<h2 id=\"TypeC\"><a href=\"#TypeC\" class=\"headerlink\" title=\"TypeC\"></a>TypeC</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">TypeC</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Charger</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">TypeC</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The laptop is being charge.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"RJ45\"><a href=\"#RJ45\" class=\"headerlink\" title=\"RJ45\"></a>RJ45</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> RJ45\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">transmit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">NettingTwine</span> <span class=\"token keyword\">implements</span> RJ45\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">transmit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Internet Data Transfer.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"Adapter\"><a href=\"#Adapter\" class=\"headerlink\" title=\"Adapter\"></a>Adapter</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Adapter</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">TypeC</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">RJ45</span> rj45<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Adapter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RJ45</span> rj45<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>rj45 <span class=\"token operator\">=</span> rj45<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TypeC to RJ45.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        rj45<span class=\"token punctuation\">.</span><span class=\"token function\">transmit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"Connector\"><a href=\"#Connector\" class=\"headerlink\" title=\"Connector\"></a>Connector</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Connector</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Connector</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TypeC</span> typeC<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"connected.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        typeC<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>ç”µè„‘çš„æ¥å£åªèƒ½è¿æ¥TypeC</p>\n<h2 id=\"AdapterTest\"><a href=\"#AdapterTest\" class=\"headerlink\" title=\"AdapterTest\"></a>AdapterTest</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AdapterTest</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">Connector</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Charger</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">Connector</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Adapter</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">NettingTwine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"æµ‹è¯•ç»“æœ\"><a href=\"#æµ‹è¯•ç»“æœ\" class=\"headerlink\" title=\"æµ‹è¯•ç»“æœ\"></a>æµ‹è¯•ç»“æœ</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">connected.\nThe laptop is being charge.\n\nconnected.\nTypeC to RJ45.\nInternet Data Transfer.<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","ç»“æ„å‹æ¨¡å¼"]},{"title":"Decorator Pattern","url":"/2021/12/09/Decorator-Pattern/","content":"<h2 id=\"Legend\"><a href=\"#Legend\" class=\"headerlink\" title=\"Legend\"></a>Legend</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Legend</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token class-name\">Integer</span> damage <span class=\"token operator\">=</span> <span class=\"token number\">70</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token class-name\">Integer</span> dot <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token class-name\">Integer</span> coldDown <span class=\"token operator\">=</span> <span class=\"token number\">6</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">attack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>damage <span class=\"token operator\">+</span> <span class=\"token string\">\" damage every time, damage over time \"</span> <span class=\"token operator\">+</span> dot <span class=\"token operator\">+</span> <span class=\"token string\">\" , skill cold down \"</span> <span class=\"token operator\">+</span> coldDown <span class=\"token operator\">+</span> <span class=\"token string\">\" second.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>æˆ‘ä»¬çš„è‹±é›„åˆå§‹å±æ€§å¤ªä½äº†ï¼Œæ— æ³•é€ æˆæŒç»­æ€§ä¼¤å®³ï¼ŒæŠ€èƒ½å†·å´æ—¶é—´é•¿è¾¾6ç§’ï¼Œä¸è¡Œï¼Œæˆ‘è¦åˆ€äº†è®¾è®¡å¸ˆã€‚</p>\n<h2 id=\"Buff\"><a href=\"#Buff\" class=\"headerlink\" title=\"Buff\"></a>Buff</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Buff</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token class-name\">Legend</span> legend<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doBuff</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedBuff</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Buff</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">RedBuff</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Legend</span> legend<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>legend <span class=\"token operator\">=</span> legend<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">doBuff</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doBuff</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        legend<span class=\"token punctuation\">.</span>dot <span class=\"token operator\">+=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Legend have red buff.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BlueBuff</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Buff</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">BlueBuff</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Legend</span> legend<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>legend <span class=\"token operator\">=</span> legend<span class=\"token punctuation\">;</span>\n        <span class=\"token function\">doBuff</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doBuff</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        legend<span class=\"token punctuation\">.</span>coldDown <span class=\"token operator\">*=</span> <span class=\"token number\">0.75</span><span class=\"token punctuation\">;</span> \n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Legend have blue buff.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>ğŸ”ªåˆ€è®¾è®¡å¸ˆä¸å¤ªç°å®ï¼Œå¥½åœ¨å³¡è°·æœ‰ä¸­ç«‹èµ„æºï¼Œä¹Ÿå°±æ˜¯çº¢Buffå’Œè“Buffï¼Œåªè¦è·å¾—äº†è¿™ä¸¤ä¸ªBuffï¼Œæˆ‘ä»¬çš„è‹±é›„å±æ€§å°†ä¼šå¾—åˆ°æå¤§çš„å¢å¼ºã€‚</p>\n<h2 id=\"DecoratorTest\"><a href=\"#DecoratorTest\" class=\"headerlink\" title=\"DecoratorTest\"></a>DecoratorTest</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DecoratorTest</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">Legend</span> legend <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Legend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        legend<span class=\"token punctuation\">.</span><span class=\"token function\">attack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Buff</span> redBuff <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RedBuff</span><span class=\"token punctuation\">(</span>legend<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        legend<span class=\"token punctuation\">.</span><span class=\"token function\">attack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Buff</span> blueBuff <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BlueBuff</span><span class=\"token punctuation\">(</span>legend<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        legend<span class=\"token punctuation\">.</span><span class=\"token function\">attack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"è¾“å‡ºç»“æœ\"><a href=\"#è¾“å‡ºç»“æœ\" class=\"headerlink\" title=\"è¾“å‡ºç»“æœ\"></a>è¾“å‡ºç»“æœ</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">70 damage every time, damage over time 0 , skill cold down 6.0 second.\nLegend have red buff.\n70 damage every time, damage over time 10 , skill cold down 6.0 second.\nLegend have blue buff.\n70 damage every time, damage over time 10 , skill cold down 4.5 second.<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>ä»ç°åœ¨å¼€å§‹ï¼Œæˆ‘è¦èµ·é£âœˆ</p>\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","ç»“æ„å‹æ¨¡å¼"]},{"title":"Bridge Pattern","url":"/2021/12/14/Bridge-Pattern/","content":"<p>å¤šå±‚ç»§æ‰¿ä¼šé€ æˆç±»çˆ†ç‚¸ï¼Œç±»çš„æ•°é‡å°†æŒ‡æ•°å¢é•¿ï¼Œå› æ­¤å‡ºç°äº†æ¡¥æ¥æ¨¡å¼å°†æŠ½è±¡ä¸å®ç°è§£è€¦ï¼Œä¸¤è€…å¯ä»¥ç‹¬ç«‹å˜åŒ–ï¼Œè§„é¿äº†å¤šå±‚ç»§æ‰¿é€ æˆç±»çˆ†ç‚¸çš„é—®é¢˜ã€‚</p>\n<h1 id=\"Laptop\"><a href=\"#Laptop\" class=\"headerlink\" title=\"Laptop\"></a>Laptop</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Laptop</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">String</span> type<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Storage</span> storage<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Laptop</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> type<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Storage</span> storage<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> type<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>storage <span class=\"token operator\">=</span> storage<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GameLaptop</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Laptop</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">GameLaptop</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Storage</span> storage<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GAME\"</span><span class=\"token punctuation\">,</span> storage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">BusinessLaptop</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Laptop</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">BusinessLaptop</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Storage</span> storage<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"BUSINESS\"</span><span class=\"token punctuation\">,</span> storage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">LightLaptop</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Laptop</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">LightLaptop</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Storage</span> storage<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"LIGHT\"</span><span class=\"token punctuation\">,</span> storage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h1 id=\"Storage\"><a href=\"#Storage\" class=\"headerlink\" title=\"Storage\"></a>Storage</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Storage</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">String</span> capacity<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Storage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> capacity<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>capacity <span class=\"token operator\">=</span> capacity<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SchemaOne</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Storage</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SchemaOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"8G + 256G\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SchemaTwo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Storage</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SchemaTwo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"16G + 512G\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SchemaThree</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Storage</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SchemaThree</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"16G + 1T\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h1 id=\"BridgeTest\"><a href=\"#BridgeTest\" class=\"headerlink\" title=\"BridgeTest\"></a>BridgeTest</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BridgeTest</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">Laptop</span> latop <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GameLaptop</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">SchemaOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>laptop<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span>capacity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>è¿™ä¸ªä¾‹å­ä¸­æœ‰3 * 3 = 9ç§ç»„åˆï¼Œé€šè¿‡æ¡¥æ¥æ¨¡å¼å†™6ä¸ªç±»å°±å¯ä»¥äº†ï¼Œå¦‚æœæœ‰4 * 4 = 16ç§ç»„åˆï¼Œç”¨ç»§æ‰¿çš„æ–¹å¼éœ€è¦äº›16ä¸ªç±»ï¼Œè€Œé‡‡ç”¨æ¡¥æ¥æ¨¡å¼åªéœ€è¦äº›8ä¸ªç±»ï¼Œå¾ˆæœ‰æ•ˆçš„é¿å…äº†å¤šå±‚ç»§æ‰¿å¸¦æ¥çš„ç±»çˆ†ç‚¸é—®é¢˜ã€‚</p>\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","ç»“æ„å‹æ¨¡å¼"]},{"title":"Design Pattern Summary","url":"/2021/12/18/Design-Pattern-Summary/","content":"<p>è®¾è®¡æ¨¡å¼å…³æ³¨å¯¹è±¡çš„åˆ›å»ºï¼Œç»“æ„å’Œè¡Œä¸ºä»¥åŠç±»çš„ç»“æ„å’Œè¡Œä¸ºã€‚</p>\n<h1 id=\"è®¾è®¡æ¨¡å¼çš„åˆ†ç±»\"><a href=\"#è®¾è®¡æ¨¡å¼çš„åˆ†ç±»\" class=\"headerlink\" title=\"è®¾è®¡æ¨¡å¼çš„åˆ†ç±»\"></a>è®¾è®¡æ¨¡å¼çš„åˆ†ç±»</h1><p>è®¾è®¡æ¨¡å¼æ ¹æ®è¦å®ç°ç›®æ ‡çš„ä¸åŒï¼Œåˆ†ä¸ºï¼š</p>\n<ol>\n<li>åˆ›å»ºå‹æ¨¡å¼</li>\n<li>ç»“æ„å‹æ¨¡å¼</li>\n<li>è¡Œä¸ºå‹æ¨¡å¼</li>\n</ol>\n<h2 id=\"åˆ›å»ºå‹æ¨¡å¼\"><a href=\"#åˆ›å»ºå‹æ¨¡å¼\" class=\"headerlink\" title=\"åˆ›å»ºå‹æ¨¡å¼\"></a>åˆ›å»ºå‹æ¨¡å¼</h2><p>é¡¾åæ€ä¹‰ï¼Œåˆ›å»ºå‹æ¨¡å¼æ˜¯ä¸ºäº†è§£å†³â€œåˆ›å»ºå¯¹è±¡â€çš„é—®é¢˜ï¼Œå°†å¯¹è±¡çš„åˆ›å»ºä¸ä½¿ç”¨åˆ†ç¦»ã€‚é€šè¿‡åˆ›å»ºå‹æ¨¡å¼å¯ä»¥å®ç°å¯å®šåˆ¶åŒ–å¯¹è±¡çš„åˆ›å»ºï¼ˆå»ºé€ è€…æ¨¡å¼ï¼‰ï¼Œé‡Œæ°æ›¿æ¢åŸåˆ™ä¸­çš„ä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ï¼ˆå·¥å‚åŠæŠ½è±¡å·¥å‚æ¨¡å¼ï¼‰ï¼Œå…¨å±€å¯¹è±¡çš„åˆ›å»ºï¼ˆå•ä¾‹æ¨¡å¼ï¼‰ä»¥åŠå¯¹åŸå§‹å¯¹è±¡çš„æ‹·è´ï¼ˆåŸå‹æ¨¡å¼ï¼‰ã€‚<br><br>åˆ›å»ºå‹æ¨¡å¼åŒ…å«ä»¥ä¸‹è®¾è®¡æ¨¡å¼ï¼š</p>\n<ul>\n<li>Factory</li>\n<li>AbstractFactory</li>\n<li>Builder</li>\n<li>Singleton</li>\n<li>Prototype</li>\n</ul>\n<h2 id=\"ç»“æ„å‹æ¨¡å¼\"><a href=\"#ç»“æ„å‹æ¨¡å¼\" class=\"headerlink\" title=\"ç»“æ„å‹æ¨¡å¼\"></a>ç»“æ„å‹æ¨¡å¼</h2><p>ç»“æ„æ¨¡å¼æ—¨åœ¨ç¡®ä¿ç³»ç»Ÿå…·æœ‰å®Œå¤‡çš„å¯æ‰©å±•æ€§çš„å‰æä¸‹ï¼Œä»¥æœ€å°çš„ä»£ä»·å®Œæˆå…·ä½“åŠŸèƒ½çš„å®ç°ã€‚å…·æœ‰ä»¥ä¸‹å®ç°æ€æƒ³ï¼šå¤šå±‚æ¬¡å¯¹è±¡çš„ç»„åˆï¼ˆç»„åˆæ¨¡å¼ï¼‰ï¼Œä¸åŒç±»å‹çš„è½¬æ¢ï¼ˆé€‚é…å™¨æ¨¡å¼ï¼‰ï¼Œå¯¹è±¡çš„å…±äº«ï¼ˆäº«å…ƒæ¨¡å¼ï¼‰ï¼Œå¯¹è±¡æœ¬èº«åŠŸèƒ½çš„å¢å¼ºï¼ˆè£…é¥°æ¨¡å¼ï¼‰ï¼Œè®¿é—®å¯¹è±¡çš„æ§åˆ¶ï¼ˆä»£ç†æ¨¡å¼ï¼‰ï¼Œç³»ç»Ÿçš„å…¥å£ï¼ˆé—¨é¢æ¨¡å¼ï¼‰ä»¥åŠå¯¹è±¡ä¸­æŠ½è±¡å±æ€§çš„ç‹¬ç«‹æ¼”åŒ–ï¼ˆæ¡¥æ¥æ¨¡å¼ï¼‰ã€‚<br><br>ç»“æ„å‹æ¨¡å¼åŒ…å«ä»¥ä¸‹è®¾è®¡æ¨¡å¼ï¼š</p>\n<ul>\n<li>Composite</li>\n<li>Adapter</li>\n<li>Flyweight</li>\n<li>Decorator</li>\n<li>Facade</li>\n<li>Proxy</li>\n<li>Bridge</li>\n</ul>\n<h2 id=\"è¡Œä¸ºå‹æ¨¡å¼\"><a href=\"#è¡Œä¸ºå‹æ¨¡å¼\" class=\"headerlink\" title=\"è¡Œä¸ºå‹æ¨¡å¼\"></a>è¡Œä¸ºå‹æ¨¡å¼</h2><p>è¡Œä¸ºå‹æ¨¡å¼ç”¨æ¥è§„å®šç±»æˆ–å¯¹è±¡çš„è¡Œä¸ºã€‚<br><br>è¡Œä¸ºå‹æ¨¡å¼åŒ…å«ä»¥ä¸‹è®¾è®¡æ¨¡å¼ï¼š</p>\n<ul>\n<li>Strategy</li>\n<li>Chain of responsibility</li>\n<li>State</li>\n<li>Iterator</li>\n<li>Command</li>\n<li>Template method</li>\n<li>Visitor</li>\n<li>Mediator</li>\n<li>Memento</li>\n<li>Observer</li>\n<li>Interpreter</li>\n</ul>\n<h1 id=\"è®¾è®¡æ¨¡å¼çš„åŸåˆ™\"><a href=\"#è®¾è®¡æ¨¡å¼çš„åŸåˆ™\" class=\"headerlink\" title=\"è®¾è®¡æ¨¡å¼çš„åŸåˆ™\"></a>è®¾è®¡æ¨¡å¼çš„åŸåˆ™</h1><h2 id=\"å¼€é—­åŸåˆ™\"><a href=\"#å¼€é—­åŸåˆ™\" class=\"headerlink\" title=\"å¼€é—­åŸåˆ™\"></a>å¼€é—­åŸåˆ™</h2><p>å¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾</p>\n<h2 id=\"é‡Œæ°æ›¿æ¢åŸåˆ™\"><a href=\"#é‡Œæ°æ›¿æ¢åŸåˆ™\" class=\"headerlink\" title=\"é‡Œæ°æ›¿æ¢åŸåˆ™\"></a>é‡Œæ°æ›¿æ¢åŸåˆ™</h2><p>é‡Œæ°æ›¿æ¢åŸåˆ™å¯ä»¥è¯´æ˜¯é¢å‘å¯¹è±¡è®¾è®¡çš„åŸºæœ¬åŸåˆ™ï¼Œä»»ä½•åŸºç±»ï¼ˆè¶…ç±»/çˆ¶ç±»ï¼‰å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚</p>\n<h2 id=\"ä¾èµ–å€’ç½®åŸåˆ™\"><a href=\"#ä¾èµ–å€’ç½®åŸåˆ™\" class=\"headerlink\" title=\"ä¾èµ–å€’ç½®åŸåˆ™\"></a>ä¾èµ–å€’ç½®åŸåˆ™</h2><p>é¢å‘æ¥å£ç¼–ç¨‹ï¼Œé¢å‘æŠ½è±¡è€Œä¸é¢å‘å…·ä½“ï¼Œå³æ‰€æœ‰ç±»éƒ½åº”è¯¥æœ‰æ¥å£æˆ–æŠ½è±¡çˆ¶ç±»ã€‚</p>\n<h2 id=\"æ¥å£éš”ç¦»åŸåˆ™\"><a href=\"#æ¥å£éš”ç¦»åŸåˆ™\" class=\"headerlink\" title=\"æ¥å£éš”ç¦»åŸåˆ™\"></a>æ¥å£éš”ç¦»åŸåˆ™</h2><p>ä¸ºæ¯ä¸ªç±»å»ºç«‹ä¸“ç”¨æ¥å£ï¼Œä¸è¦å°è¯•ç”¨åºå¤§çš„æ¥å£å»å›Šæ‹¬å…¶ä»–æ¥å£çš„åŠŸèƒ½ï¼Œå°±åƒserviceåŠå…¶å®ç°ç±»ã€‚</p>\n<h2 id=\"å•ä¸€èŒè´£åŸåˆ™\"><a href=\"#å•ä¸€èŒè´£åŸåˆ™\" class=\"headerlink\" title=\"å•ä¸€èŒè´£åŸåˆ™\"></a>å•ä¸€èŒè´£åŸåˆ™</h2><p>ç±»çš„åŠŸèƒ½åº”å°½é‡å•ä¸€ï¼Œé¿å…åŠŸèƒ½è¿‡äºé›†ä¸­åœ¨æŸä¸ªç±»ä¸Šé¢ï¼Œåº”å°†åŠŸèƒ½æ‹†åˆ†ã€‚</p>\n<h2 id=\"è¿ªç±³ç‰¹æ³•åˆ™\"><a href=\"#è¿ªç±³ç‰¹æ³•åˆ™\" class=\"headerlink\" title=\"è¿ªç±³ç‰¹æ³•åˆ™\"></a>è¿ªç±³ç‰¹æ³•åˆ™</h2><p>â€œä¸è¦å’Œé™Œç”Ÿäººè¯´è¯â€ï¼Œä¸€ä¸ªå¯¹è±¡åº”å°½é‡é¿å…ä¸å¦å¤–çš„å¯¹è±¡ç›´æ¥äº§ç”Ÿé€šä¿¡ï¼ˆè°ƒç”¨ï¼‰ï¼Œåº”é‡‡ç”¨ä¸­ä»‹ç±»å®ç°é€šä¿¡ã€‚</p>\n<h2 id=\"åˆæˆå¤ç”¨åŸåˆ™\"><a href=\"#åˆæˆå¤ç”¨åŸåˆ™\" class=\"headerlink\" title=\"åˆæˆå¤ç”¨åŸåˆ™\"></a>åˆæˆå¤ç”¨åŸåˆ™</h2><p>å°½é‡ä½¿ç”¨èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ç»§æ‰¿ï¼Œå¤šå±‚ç»§æ‰¿ä¼šäº§ç”Ÿç±»çˆ†ç‚¸ã€‚</p>\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼"]},{"title":"Command Pattern","url":"/2021/12/14/Command-Pattern/","content":"<p>å‘½ä»¤æ¨¡å¼æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œä¸»è¦ç”¨äºè®¾è®¡å„ç§å‘½ä»¤åŠæ‰§è¡Œè¿™äº›å‘½ä»¤çš„æ–¹æ³•ã€‚</p>\n<h1 id=\"Command\"><a href=\"#Command\" class=\"headerlink\" title=\"Command\"></a>Command</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Command</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Mouse</span> mouse<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Command</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Mouse</span> mouse<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mouse <span class=\"token operator\">=</span> mouse<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span> \n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        mouse<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" execution.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Cut</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Command</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Cut</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Mouse</span> mouse<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"CUT\"</span><span class=\"token punctuation\">,</span> mouse<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Copy</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Command</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Copy</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Mouse</span> mouse<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"COPY\"</span><span class=\"token punctuation\">,</span> mouse<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h1 id=\"Mouse\"><a href=\"#Mouse\" class=\"headerlink\" title=\"Mouse\"></a>Mouse</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Mouse</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Left button click.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"Invoker\"><a href=\"#Invoker\" class=\"headerlink\" title=\"Invoker\"></a>Invoker</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Invoker</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Command</span> command<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Invoker</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Command</span> command<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>command <span class=\"token operator\">=</span> command<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        command<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h1 id=\"Test\"><a href=\"#Test\" class=\"headerlink\" title=\"Test\"></a>Test</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">Mouse</span> mouse <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Mouse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Command</span> cut <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Cut</span><span class=\"token punctuation\">(</span>mouse<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Command</span> copy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Copy</span><span class=\"token punctuation\">(</span>mouse<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Invoker</span> cutInvoke <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Invoker</span><span class=\"token punctuation\">(</span>cut<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        cutInvoke<span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Invoker</span> copyInvoke <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Invoker</span><span class=\"token punctuation\">(</span>copy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        copyInvoke<span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"æµ‹è¯•ç»“æœ\"><a href=\"#æµ‹è¯•ç»“æœ\" class=\"headerlink\" title=\"æµ‹è¯•ç»“æœ\"></a>æµ‹è¯•ç»“æœ</h2><pre class=\"line-numbers language-none\"><code class=\"language-none\">Left button click.\nCUT execution.\nLeft button click.\nCOPY execution.<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","è¡Œä¸ºå‹æ¨¡å¼"]},{"title":"Flyweight Pattern","url":"/2021/12/11/Flyweight-Pattern/","content":"<p>äº«å…ƒæ¨¡å¼è¢«å¤§é‡è¿ç”¨äºæ± æŠ€æœ¯ï¼Œæ•°æ®åº“è¿æ¥æ± ï¼Œçº¿ç¨‹æ± ï¼ŒStringçš„internæ–¹æ³•ï¼ŒJavaæ•´å‹ã€å­—ç¬¦å‹åŒ…è£…ç±»ç­‰éƒ½ä½¿ç”¨äº†äº«å…ƒæ¨¡å¼ã€‚</p>\n<h2 id=\"CharacterCache\"><a href=\"#CharacterCache\" class=\"headerlink\" title=\"CharacterCache\"></a>CharacterCache</h2><p>åœ¨<code>Character</code>åŒ…è£…ç±»æºç ä¸­å­˜åœ¨ç§æœ‰çš„é™æ€å†…éƒ¨ç±»<code>CharacterCache</code>ï¼ˆåœ¨<code>Integer</code>åŒ…è£…ç±»ä¸­ä¹ŸåŒæ ·å­˜åœ¨<code>IntegerCache</code>ï¼‰ï¼Œè¿™ä¸ªç±»å°±æ˜¯ä½¿ç”¨äº«å…ƒè®¾è®¡æ¨¡å¼çš„æ€æƒ³å®ç°çš„ã€‚</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CharacterCache</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">CharacterCache</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Character</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> cache<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">static</span> <span class=\"token class-name\">Character</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> archivedCache<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">static</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> size <span class=\"token operator\">=</span> <span class=\"token number\">127</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Load and use the archived cache if it exists</span>\n        CDS<span class=\"token punctuation\">.</span><span class=\"token function\">initializeFromArchive</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CharacterCache</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>archivedCache <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">||</span> archivedCache<span class=\"token punctuation\">.</span>length <span class=\"token operator\">!=</span> size<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token class-name\">Character</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> c <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Character</span><span class=\"token punctuation\">[</span>size<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> size<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n                c<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Character</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">char</span><span class=\"token punctuation\">)</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            archivedCache <span class=\"token operator\">=</span> c<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        cache <span class=\"token operator\">=</span> archivedCache<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token comment\">/**\n * Returns a &#123;@code Character&#125; instance representing the specified\n * &#123;@code char&#125; value.\n * If a new &#123;@code Character&#125; instance is not required, this method\n * should generally be used in preference to the constructor\n * &#123;@link #Character(char)&#125;, as this method is likely to yield\n * significantly better space and time performance by caching\n * frequently requested values.\n *\n * This method will always cache values in the range &#123;@code\n * '\\u005Cu0000'&#125; to &#123;@code '\\u005Cu007F'&#125;, inclusive, and may\n * cache other values outside of this range.\n *\n * @param  c a char value.\n * @return a &#123;@code Character&#125; instance representing &#123;@code c&#125;.\n * @since  1.5\n */</span>\n<span class=\"token annotation punctuation\">@IntrinsicCandidate</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Character</span> <span class=\"token function\">valueOf</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">char</span> c<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>c <span class=\"token operator\">&lt;=</span> <span class=\"token number\">127</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token comment\">// must cache</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">CharacterCache</span><span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Character</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><code>Character</code>åŒ…è£…ç±»çš„ç¼“å­˜å¤§å°æ˜¯æ— ç¬¦å·<code>\\u005Cu0000</code> - <code>\\u005Cu007F</code>ï¼Œå¯¹åº”ASCIIç è¡¨æ˜¯åè¿›åˆ¶[0-127]ï¼Œè€Œ<code>Integer</code>çš„ç¼“å­˜å¤§å°ä¸ºæ•´å‹<code>-128</code> - <code>127</code>ã€‚</p>\n<h2 id=\"Car\"><a href=\"#Car\" class=\"headerlink\" title=\"Car\"></a>Car</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Car</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Car</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">drive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Drive a \"</span> <span class=\"token operator\">+</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Nissan</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Car</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Nissan</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"NISSAN\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Porsche</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Car</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Porsche</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"PORSCHE\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Volkswagen</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Car</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Volkswagen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"VOLKSWAGEN\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"CarFactory\"><a href=\"#CarFactory\" class=\"headerlink\" title=\"CarFactory\"></a>CarFactory</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CarFactory</span> \n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Car</span> <span class=\"token function\">buyCar</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"VOLKSWAGEN\"</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Volkswagen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"PORSCHE\"</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Porsche</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"NISSAN\"</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Nissan</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"Bran\"><a href=\"#Bran\" class=\"headerlink\" title=\"Bran\"></a>Bran</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Bran</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Car</span><span class=\"token punctuation\">></span></span> myCars <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Car</span> car<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        myCars<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> car<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Car</span> <span class=\"token function\">getCar</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">Car</span> car <span class=\"token operator\">=</span> myCars<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span> <span class=\"token operator\">==</span> car<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            car <span class=\"token operator\">=</span> <span class=\"token class-name\">CarFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">buyCar</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            myCars<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> car<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">return</span> car<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><code>Bran</code>å°±ç›¸å½“äºä¸€ä¸ªæ± å­ï¼Œå­˜å‚¨ç€æ‰€æœ‰çš„<code>Car</code>å¯¹è±¡ï¼Œéœ€è¦çš„æ—¶å€™è°ƒç”¨<code>getCar</code>æ–¹æ³•ä»æ± å­é‡Œæ‹¿å°±å¯ä»¥äº†ã€‚</p>\n<h2 id=\"BranTest\"><a href=\"#BranTest\" class=\"headerlink\" title=\"BranTest\"></a>BranTest</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BranTest</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">Bran</span> bran <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Bran</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Car</span> car <span class=\"token operator\">=</span> bran<span class=\"token punctuation\">.</span><span class=\"token function\">getCar</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"NISSAN\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        car<span class=\"token punctuation\">.</span><span class=\"token function\">drive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"è¾“å‡ºç»“æœ\"><a href=\"#è¾“å‡ºç»“æœ\" class=\"headerlink\" title=\"è¾“å‡ºç»“æœ\"></a>è¾“å‡ºç»“æœ</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">Drive a NISSAN<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","ç»“æ„å‹æ¨¡å¼"]},{"title":"Facade Pattern","url":"/2021/12/08/Facade-Pattern/","content":"<h2 id=\"Controller\"><a href=\"#Controller\" class=\"headerlink\" title=\"Controller\"></a>Controller</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Controller</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Service</span> service <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Service</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        service<span class=\"token punctuation\">.</span><span class=\"token function\">doCreate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">retrieve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        service<span class=\"token punctuation\">.</span><span class=\"token function\">doRetrieve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        service<span class=\"token punctuation\">.</span><span class=\"token function\">doUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        service<span class=\"token punctuation\">.</span><span class=\"token function\">doDelete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"Service\"><a href=\"#Service\" class=\"headerlink\" title=\"Service\"></a>Service</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Service</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doCreate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"insert one record to mysql...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doRetrieve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select one record from mysql...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"update one record to mysql...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doDelete</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"delete one record from mysql...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>ä»¥ä¸Šçš„ä»£ç æ˜¯ä¸æ˜¯è§‰å¾—å¼‚å¸¸ç†Ÿæ‚‰ï¼Ÿé—¨é¢ï¼ˆå¤–è§‚ï¼‰æ¨¡å¼å¼ºè°ƒçš„æ˜¯ç³»ç»Ÿå¯¹å¤–æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œè€Œ<code>Controller</code>å°±æ˜¯åç«¯æœåŠ¡æš´éœ²ç»™å‰ç«¯ç”¨äºè°ƒç”¨ä¸šåŠ¡é€»è¾‘ä»£ç çš„ç»Ÿä¸€æ¥å£ï¼›ä»£ç ä¸­æ²¡æœ‰å†™daoå±‚ï¼Œå…¶å®å¦‚æœåŠ ä¸Šdaoå±‚ï¼Œ<code>Service</code>ä¹Ÿç›¸å½“äºæ˜¯Serviceå±‚å’ŒDaoå±‚çš„é—¨é¢ã€‚</p>\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","ç»“æ„å‹æ¨¡å¼"]},{"title":"Chain of Responsibility Pattern","url":"/2021/12/09/Chain-of-Responsibility-Pattern/","content":"<h1 id=\"å•å‘è´£ä»»é“¾\"><a href=\"#å•å‘è´£ä»»é“¾\" class=\"headerlink\" title=\"å•å‘è´£ä»»é“¾\"></a>å•å‘è´£ä»»é“¾</h1><h2 id=\"User\"><a href=\"#User\" class=\"headerlink\" title=\"User\"></a>User</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token class-name\">String</span> pwd<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">String</span> role<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Integer</span> age<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span><span class=\"token class-name\">String</span> pwd<span class=\"token punctuation\">,</span><span class=\"token class-name\">String</span> role<span class=\"token punctuation\">,</span><span class=\"token class-name\">Integer</span> age<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pwd <span class=\"token operator\">=</span> pwd<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>role <span class=\"token operator\">=</span> role<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>age <span class=\"token operator\">=</span> age<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"Filter\"><a href=\"#Filter\" class=\"headerlink\" title=\"Filter\"></a>Filter</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Filter</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">boolean</span> <span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PwdFilter</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Filter</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"PWD_FROM_SQL\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>pwd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">AuthFilter</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Filter</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"ADMIN\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>role<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">AgeFilter</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Filter</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token number\">18</span> <span class=\"token operator\">>=</span> user<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"FilterChain\"><a href=\"#FilterChain\" class=\"headerlink\" title=\"FilterChain\"></a>FilterChain</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FilterChain</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Filter</span> filters <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Filter</span> filter<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        filters<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>filter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span> user<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Filter</span> filter <span class=\"token operator\">:</span> filters<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>filter<span class=\"token punctuation\">.</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>filter<span class=\"token punctuation\">.</span>getClass<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" does not permit.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"ChainTest\"><a href=\"#ChainTest\" class=\"headerlink\" title=\"ChainTest\"></a>ChainTest</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ChainTest</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mate\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"PWD_FROM_SQLl\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"ADMIN\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">FilterChain</span> filter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FilterChain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        filter<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">PwdFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        filter<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">AuthFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        filter<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">AgeFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        filter<span class=\"token punctuation\">.</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"æµ‹è¯•ç»“æœ\"><a href=\"#æµ‹è¯•ç»“æœ\" class=\"headerlink\" title=\"æµ‹è¯•ç»“æœ\"></a>æµ‹è¯•ç»“æœ</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">PwdFilter does not permit.<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>è´£ä»»é“¾æ¨¡å¼é€šè¿‡å°†å¤šä¸ªå¤„ç†è¯·æ±‚çš„ç±»ç»„åˆåœ¨ä¸€èµ·å½¢æˆä¸€æ¡é“¾ï¼Œå½“æœ‰è¯·æ±‚ä¼ é€’è¿‡æ¥äº†ï¼Œå¯ä»¥é€šè¿‡è¿™æ¡é“¾æ¡ç›´åˆ°å®ƒæ»¡è¶³æ‰€æœ‰æ¡ä»¶æˆ–æœ‰å¯¹è±¡å¯ä»¥å¤„ç†å®ƒä¸ºæ­¢ã€‚Spring gatewayä¸­çš„filteré“¾å’ŒTomcatä¸­çš„filteré“¾å°±å±äºè¿™ç§æ¨¡å¼ã€‚<br>ä½†ä¸Tomcatä¸­çš„filteré“¾ä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬çš„filteré“¾æ˜¯å•æ–¹å‘çš„ï¼Œå¹¶æ²¡æœ‰å¯¹å“åº”åšå‡ºè¿‡æ»¤ã€‚<br><br>filter1 ===&gt; filter2 ===&gt; filter3 ==<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |<br><br>filter1 &lt;=== filter2 &lt;=== filter3 ==<br></p>\n<h1 id=\"åŒå‘è´£ä»»é“¾\"><a href=\"#åŒå‘è´£ä»»é“¾\" class=\"headerlink\" title=\"åŒå‘è´£ä»»é“¾\"></a>åŒå‘è´£ä»»é“¾</h1><h2 id=\"Request\"><a href=\"#Request\" class=\"headerlink\" title=\"Request\"></a>Request</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Request</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h2 id=\"Response\"><a href=\"#Response\" class=\"headerlink\" title=\"Response\"></a>Response</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h2 id=\"Filter-1\"><a href=\"#Filter-1\" class=\"headerlink\" title=\"Filter\"></a>Filter</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Filter</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">boolean</span> <span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Request</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Response</span> res<span class=\"token punctuation\">,</span> <span class=\"token class-name\">FilterChain</span> chain<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LocaleFilter</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Filter</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Request</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Response</span> res<span class=\"token punctuation\">,</span> <span class=\"token class-name\">FilterChain</span> chain<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"check request encoding and locale setting.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        chain<span class=\"token punctuation\">.</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"check response encoding and locale setting.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span> \n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UrlFilter</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Filter</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Request</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Response</span> res<span class=\"token punctuation\">,</span> <span class=\"token class-name\">FilterChain</span> chain<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"check request url.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        chain<span class=\"token punctuation\">.</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"check response url.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HeaderFilter</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Filter</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Request</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Response</span> res<span class=\"token punctuation\">,</span> <span class=\"token class-name\">FilterChain</span> chain<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"check request header.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        chain<span class=\"token punctuation\">.</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"check response header.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"FilterChain-1\"><a href=\"#FilterChain-1\" class=\"headerlink\" title=\"FilterChain\"></a>FilterChain</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FilterChain</span>\n<span class=\"token punctuation\">&#123;</span>   \n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Filter</span><span class=\"token punctuation\">></span></span> filters <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// length of filters</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> l<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// index of filters</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> i<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Filter</span> filter<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        filters<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>filter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        l<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Request</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Response</span> res<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">&lt;</span> l<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token class-name\">Filter</span> filter <span class=\"token operator\">=</span> filters<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            filter<span class=\"token punctuation\">.</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">==</span> l<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"doService......\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            i<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"ChainTest-1\"><a href=\"#ChainTest-1\" class=\"headerlink\" title=\"ChainTest\"></a>ChainTest</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ChainTest</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">Request</span> req <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Request</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Response</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Response</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">FilterChain</span> filterChain <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FilterChain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        filterChain<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">HeaderFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        filterChain<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">UrlFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        filterChain<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">LocaleFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        filterChain<span class=\"token punctuation\">.</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        filterChain<span class=\"token punctuation\">.</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"æµ‹è¯•ç»“æœ-1\"><a href=\"#æµ‹è¯•ç»“æœ-1\" class=\"headerlink\" title=\"æµ‹è¯•ç»“æœ\"></a>æµ‹è¯•ç»“æœ</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">check request header.\ncheck request url.\ncheck request encoding and locale setting.\ndoService.....\ncheck response encoding and locale setting.\ncheck response url.\ncheck response header.\n\ncheck request header.\ncheck request url.\ncheck request encoding and locale setting.\ndoService.....\ncheck response encoding and locale setting.\ncheck response url.\ncheck response header.<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","è¡Œä¸ºå‹æ¨¡å¼"]},{"title":"Factory Pattern","url":"/2021/12/08/Factory-Pattern/","content":"<h2 id=\"ç®€å•å·¥å‚æ¨¡å¼\"><a href=\"#ç®€å•å·¥å‚æ¨¡å¼\" class=\"headerlink\" title=\"ç®€å•å·¥å‚æ¨¡å¼\"></a>ç®€å•å·¥å‚æ¨¡å¼</h2><h3 id=\"Playæ¥å£\"><a href=\"#Playæ¥å£\" class=\"headerlink\" title=\"Playæ¥å£\"></a>Playæ¥å£</h3><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Play</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"æ¥å£å®ç°ç±»\"><a href=\"#æ¥å£å®ç°ç±»\" class=\"headerlink\" title=\"æ¥å£å®ç°ç±»\"></a>æ¥å£å®ç°ç±»</h3><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">VideoGames</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Play</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Play computer and video games.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PingPong</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Play</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Play ping-pong.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Playground</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Play</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"children shouting and running in the playground.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"Playå·¥å‚\"><a href=\"#Playå·¥å‚\" class=\"headerlink\" title=\"Playå·¥å‚\"></a>Playå·¥å‚</h3><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PlayFactory</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Play</span> <span class=\"token function\">getPlay</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> type<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"VIDEO_GAMES\"</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">VideoGames</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"PING_PONG\"</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PingPong</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"PLAYGROUND\"</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Playground</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>ç®€å•å·¥å‚æ¨¡å¼å±äºå»ºé€ è€…æ¨¡å¼ï¼Œå·¥å‚ç±»å·²ç»å¸®æˆ‘ä»¬<code>new</code>å¥½äº†å¯¹è±¡ï¼Œç®€å•å·¥å‚æ¨¡å¼æœ‰å¾ˆå¤§çš„å¼Šç«¯ï¼Œå¦‚æœæœ‰æ–°çš„Playæ¥å£å®ç°ç±»çš„è¯ï¼Œæˆ‘ä»¬å¿…é¡»æ›´æ”¹å·¥å‚ç±»çš„ä»£ç ï¼Œè¿™è¿èƒŒäº†è®¾è®¡åŸåˆ™ä¸­çš„<code>å¼€é—­åŸåˆ™</code>ï¼ˆå¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾ï¼‰ï¼›è€Œä¸”åç»­å®ç°ç±»è¶Šæ¥è¶Šå¤šä¼šé€ æˆå·¥å‚ç±»å¼‚å¸¸è‡ƒè‚¿ï¼ŒèŒè´£è¿‡äºé›†ä¸­ã€‚<br><br>å·¥å‚æ¨¡å¼æ˜¯æ ¹æ®ç°å®ä¸­çš„å·¥å‚æ‰€æŠ½è±¡å‡ºæ¥çš„ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œç›®å‰æˆ‘ä»¬çš„å·¥å‚åªæœ‰ä¸€æ¡â€œæµæ°´çº¿â€ï¼Œæ— æ³•ç”Ÿäº§ä¸åŒâ€œç±»å‹â€çš„äº§å“ï¼Œè¿™æ—¶å€™å°±éœ€è¦å¼•å…¥æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚</p>\n<h2 id=\"æŠ½è±¡å·¥å‚æ¨¡å¼\"><a href=\"#æŠ½è±¡å·¥å‚æ¨¡å¼\" class=\"headerlink\" title=\"æŠ½è±¡å·¥å‚æ¨¡å¼\"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h2><h3 id=\"æ¥å£\"><a href=\"#æ¥å£\" class=\"headerlink\" title=\"æ¥å£\"></a>æ¥å£</h3><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Play</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Read</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"å„ç§Play\"><a href=\"#å„ç§Play\" class=\"headerlink\" title=\"å„ç§Play\"></a>å„ç§Play</h3><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Soccer</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Play</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"I played soccer when I was younger.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">GrandTheftAuto</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Play</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"You forget a thousand things every dayï¼ŒHow about you make sure this is one of them?\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Battlefield</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Play</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"They push,we push.If every once in a while,we push hard enough that the world beyond the war glimmers,just out of reach. \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"å„ç§Read\"><a href=\"#å„ç§Read\" class=\"headerlink\" title=\"å„ç§Read\"></a>å„ç§Read</h3><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">OperatingSystems</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Read</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Thus the real point of the educational process: to go forth, to study many new and fascinating topics, to learn, to mature, and most importantly, to find something that lights a fire for you.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">A_GlobalHistory</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Read</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A Global History: From Prehistory to the 21st Century\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"æŠ½è±¡å·¥å‚\"><a href=\"#æŠ½è±¡å·¥å‚\" class=\"headerlink\" title=\"æŠ½è±¡å·¥å‚\"></a>æŠ½è±¡å·¥å‚</h3><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AbstractFactory</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token class-name\">Play</span> <span class=\"token function\">getPlay</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token class-name\">Read</span> <span class=\"token function\">getRead</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"å„ç§è½¦é—´\"><a href=\"#å„ç§è½¦é—´\" class=\"headerlink\" title=\"å„ç§è½¦é—´\"></a>å„ç§è½¦é—´</h3><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PlayFactory</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractFactory</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token class-name\">Play</span> <span class=\"token function\">getPlay</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> type<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"SOCCER\"</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Soccer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"GRAND_THEFT_AUTO\"</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GrandTheftAuto</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"BATTLEFIELD\"</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Battlefield</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ReadFactory</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AbstractFactory</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token class-name\">Read</span> <span class=\"token function\">getRead</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> type<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"OS\"</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OperatingSystems</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"HISTORY\"</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">A_GlobalHistory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>ç°åœ¨æˆ‘ä»¬çš„å·¥å‚å¯ä»¥ç”Ÿäº§ä¸¤ç§ä¸åŒçš„äº§å“äº†ï¼Œåœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œæˆ‘ä»¬çš„å·¥å‚æ‹¥æœ‰ä¸¤ä¸ªä¸åŒçš„â€œè½¦é—´â€ï¼Œå¯ä»¥ç”Ÿäº§å‡ºä¸åŒç§ç±»çš„äº§å“ï¼š<code>Play</code>ï¼Œ<code>Read</code>ã€‚ï¼ˆè™½ç„¶è¿™ç§æƒ…å†µä¸å¤ªå¯èƒ½å‘ç”Ÿåœ¨ç°å®ç”Ÿæ´»ä¸­ï¼‰<br><br>æŠ½è±¡å·¥å‚æ¨¡å¼å¯ä»¥çœ‹ä½œæ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„ä¸€ä¸ªæ•´åˆï¼Œé€šè¿‡å°†è¿™äº›ç®€å•å·¥å‚æ•´åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªæ›´å¤§ï¼ŒåŠŸèƒ½æ›´ä¸ºå…¨é¢çš„å·¥å‚ï¼Œå³æˆ‘ä»¬å®šä¹‰çš„æŠ½è±¡å·¥å‚ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œè¢«æˆ‘ä»¬é€šè¿‡æŠ½è±¡ç±»æ•´åˆè¿›æ¥çš„ç®€å•å·¥å‚å¯ä»¥çœ‹ä½œä¸€æ¡â€œæµæ°´çº¿â€æˆ–ä¸€ä¸ªâ€œè½¦é—´â€ï¼Œç”±å®ƒä»¬å…±åŒç»„æˆäº†å¯ä»¥ç”Ÿäº§å¤šç§ç±»å‹äº§å“çš„æŠ½è±¡å·¥å‚ã€‚<br><br>åŒæ—¶ï¼Œä¸€äº›é—®é¢˜åœ¨æŠ½è±¡å·¥å‚ä¸­ä»æ— æ³•å¾—åˆ°è§£å†³ï¼š</p>\n<blockquote>\n<p>å¦‚æœæ‰©å……æ–°ç±»å‹çš„äº§å“ï¼Œéœ€è¦å¯¹æ•´ä¸ªæŠ½è±¡å·¥å‚æ¨¡å¼çš„ä»£ç åšå‡ºè°ƒæ•´<br>æŸç±»å‹çš„äº§å“å¦‚æœéœ€è¦å¢åŠ æ–°çš„å…·ä½“å®ç°ï¼Œéœ€è¦å¯¹å•ä¸ªå·¥å‚ï¼ˆæˆ–è½¦é—´ï¼‰çš„ä»£ç åšå‡ºè°ƒæ•´</p>\n</blockquote>\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","åˆ›å»ºå‹æ¨¡å¼"]},{"title":"Iterator Pattern","url":"/2021/12/12/Iterator-Pattern/","content":"<p>è¿­ä»£å™¨æ¨¡å¼æ˜¯ä¸€ç§ä¸“æœ‰æ¨¡å¼ï¼Œä¸»è¦ç”¨äºå„ç§æ•°æ®ç»“æ„çš„éå†ï¼Œåœ¨Javaçš„é›†åˆä½“ç³»ä¸­è®¾è®¡äº†Iteratorä½œä¸ºé›†åˆé¡¶çº§æ¥å£ã€‚<br>æˆ‘ä»¬å¯ä»¥è‡ªå·±ç®€å•å®ç°é›†åˆä¸­çš„Mapã€Listæ¥ä½“ä¼šè¿™ç§è®¾è®¡æ¨¡å¼ã€‚</p>\n<h2 id=\"Iterator\"><a href=\"#Iterator\" class=\"headerlink\" title=\"_Iterator\"></a>_Iterator</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> _Iterator\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">boolean</span> <span class=\"token function\">hasNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Object</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"Collection\"><a href=\"#Collection\" class=\"headerlink\" title=\"_Collection\"></a>_Collection</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> _Collection<span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token keyword\">extends</span> _Iterator \n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">int</span> <span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    _Iterator <span class=\"token function\">iterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>æ³¨æ„ï¼š<code>JDK</code>ä¸­çš„<code>Collection</code>ç»§æ‰¿çš„æ˜¯<code>Iterable</code>æ¥å£ï¼Œè€Œ<code>Iterable</code>æ¥å£å†…æœ‰æ–¹æ³•<code>iterator</code>ç”¨äºè¿”å›è¿­ä»£å™¨å¯¹è±¡ã€‚ï¼ˆé›†åˆçš„<code>forEach</code>æ–¹æ³•ä¹Ÿåœ¨<code>Iterable</code>æ¥å£å†…ä½œä¸º<code>default</code>æ–¹æ³•å­˜åœ¨ï¼‰</p>\n<h2 id=\"MyArrayList\"><a href=\"#MyArrayList\" class=\"headerlink\" title=\"_MyArrayList\"></a>_MyArrayList</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> _MyLinkedList<span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token keyword\">implements</span> _Collection<span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Node</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">T</span> data<span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">Node</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> next<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">Node</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> obj<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token class-name\">Node</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> first<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Node</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> last<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">int</span> size <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> obj<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">Node</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> node <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Node</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span> <span class=\"token operator\">==</span> first<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            first <span class=\"token operator\">=</span> node<span class=\"token punctuation\">;</span>\n            last <span class=\"token operator\">=</span> node<span class=\"token punctuation\">;</span>\n            cursor <span class=\"token operator\">=</span> node<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        last<span class=\"token punctuation\">.</span>next <span class=\"token operator\">=</span> node<span class=\"token punctuation\">;</span>\n        last <span class=\"token operator\">=</span> node<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>size<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> _Iterator <span class=\"token function\">iterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token class-name\">Node</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> cursor<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">hasNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span> <span class=\"token operator\">!=</span> cursor<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token comment\">//æ¸¸æ ‡å½’ä½</span>\n        cursor <span class=\"token operator\">=</span> first<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">T</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>   \n        <span class=\"token class-name\">T</span> result <span class=\"token operator\">=</span> cursor<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//æ¸¸æ ‡ç§»å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>\n        cursor <span class=\"token operator\">=</span> cursor<span class=\"token punctuation\">.</span>next<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> result<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"Map\"><a href=\"#Map\" class=\"headerlink\" title=\"_Map\"></a>_Map</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> _Map<span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">K</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span> <span class=\"token keyword\">extends</span> _Iterator\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">K</span> key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">V</span> value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">V</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">K</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    _Iterator <span class=\"token function\">entry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">int</span> <span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>æ³¨æ„ï¼š<code>JDK</code>ä¸­çš„<code>Map</code>æœ¬èº«æ²¡æœ‰ç»§æ‰¿<code>Iterator</code>æˆ–<code>Iterable</code>ï¼Œå…¶å®ç°ç±»<code>HashMap</code>çš„å†…éƒ¨<code>final</code>ç±»<code>EntrySet</code>å®ç°äº†<code>Iterable</code>ã€‚</p>\n<h2 id=\"MyMap\"><a href=\"#MyMap\" class=\"headerlink\" title=\"_MyMap\"></a>_MyMap</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> _MyMap<span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">K</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span> <span class=\"token keyword\">implements</span> _Map<span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">K</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Data</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">K</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">K</span> key<span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">V</span> value<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token class-name\">Data</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">K</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> data<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">int</span> size <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">K</span> key<span class=\"token punctuation\">,</span> <span class=\"token class-name\">V</span> value<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>size <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Data</span><span class=\"token punctuation\">[</span><span class=\"token number\">16</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n\n        <span class=\"token class-name\">Data</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">K</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Data</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        data<span class=\"token punctuation\">.</span>key <span class=\"token operator\">=</span> key<span class=\"token punctuation\">;</span>\n        data<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> value<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">[</span>size<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\n        \n        size<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>size <span class=\"token operator\">></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>length <span class=\"token operator\">*</span> <span class=\"token number\">0.75</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">V</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">K</span> key<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Data</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">K</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span> vdata <span class=\"token operator\">:</span> data<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Objects</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>vdata<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token keyword\">return</span> vdata<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> _Iterator <span class=\"token function\">entry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token comment\">//ç”¨äºè¿­ä»£çš„å…‰æ ‡</span>\n    <span class=\"token keyword\">int</span> cursor <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//åˆ¤æ–­å½“å‰å…‰æ ‡ä¸‹æ˜¯å¦ä¸ºnull</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">hasNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span> <span class=\"token operator\">!=</span> data<span class=\"token punctuation\">[</span>cursor<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token comment\">//éå†ç»“æŸï¼Œé‡ç½®å…‰æ ‡</span>\n        cursor <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token comment\">//è¿”å›æ­£åœ¨éå†å…‰æ ‡çš„æ•°æ®ï¼Œå¹¶å°†å…‰æ ‡åç§»ä¸€ä½</span>\n        <span class=\"token keyword\">return</span> data<span class=\"token punctuation\">[</span>cursor<span class=\"token operator\">++</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Data</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">K</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> data<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> newLength <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Data</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">K</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">V</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> newData <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Data</span><span class=\"token punctuation\">[</span>newLength<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">int</span> index <span class=\"token operator\">=</span> data<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>index <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            newData<span class=\"token punctuation\">[</span><span class=\"token operator\">--</span>index<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> newData<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","è¡Œä¸ºå‹æ¨¡å¼"]},{"title":"Mediator Pattern","url":"/2021/12/08/Mediator-Pattern/","content":"<h2 id=\"MotherBoard\"><a href=\"#MotherBoard\" class=\"headerlink\" title=\"MotherBoard\"></a>MotherBoard</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Mediator</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">exchange</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> data<span class=\"token punctuation\">,</span><span class=\"token class-name\">Components</span> transmit<span class=\"token punctuation\">,</span><span class=\"token class-name\">Components</span> receive<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MotherBoard</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Mediator</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">exchange</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> data<span class=\"token punctuation\">,</span><span class=\"token class-name\">Components</span> transmit<span class=\"token punctuation\">,</span><span class=\"token class-name\">Components</span> receive<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        transmit<span class=\"token punctuation\">.</span><span class=\"token function\">sendData</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span>receive<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        receive<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span>transmit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"Components\"><a href=\"#Components\" class=\"headerlink\" title=\"Components\"></a>Components</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Components</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> data<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Components</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sendData</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> data<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Components</span> receive<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n      receive<span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\n      <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" send data to \"</span> <span class=\"token operator\">+</span> receive<span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" data = [ \"</span> <span class=\"token operator\">+</span> data <span class=\"token operator\">+</span> <span class=\"token string\">\" ] \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Components</span> transmit<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" receive data from \"</span> <span class=\"token operator\">+</span> transmit<span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" data = [ \"</span> <span class=\"token operator\">+</span> data <span class=\"token operator\">+</span> <span class=\"token string\">\" ] \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">KeyBoard</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Components</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">KeyBoard</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Monitor</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Components</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Monitor</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">GraphicCard</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Components</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">GraphicCard</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n      <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"Test\"><a href=\"#Test\" class=\"headerlink\" title=\"Test\"></a>Test</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MediatorTest</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">Componets</span> transmit <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GraphicCard</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GRAPHIC_CARD\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Components</span> receive <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Monitor</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MONITOR\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Mediator</span> mediator <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MotherBoard</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        mediator<span class=\"token punctuation\">.</span><span class=\"token function\">exchange</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"game_display\"</span><span class=\"token punctuation\">,</span>transmit<span class=\"token punctuation\">,</span>receive<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"æµ‹è¯•ç»“æœ\"><a href=\"#æµ‹è¯•ç»“æœ\" class=\"headerlink\" title=\"æµ‹è¯•ç»“æœ\"></a>æµ‹è¯•ç»“æœ</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">GRAPHIC_CARD send data to MONITOR data &#x3D; [ game_display ] \nMONITOR receive data from GRAPHIC_CARD data &#x3D; [ game_display ]<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸»æ¿è´Ÿè´£ç”µè„‘å„éƒ¨åˆ†ç»„ä»¶ä¹‹é—´çš„æ•°æ®ä¼ é€’ï¼Œä¸»æ¿å°±æ˜¯Mediatorï¼ˆä¸­ä»‹ï¼‰ã€‚</p>\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","è¡Œä¸ºå‹æ¨¡å¼"]},{"title":"JDKåŠ¨æ€ä»£ç†","url":"/2021/12/11/JDK%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86/","content":"<h1 id=\"java-lang-reflect-Proxy\"><a href=\"#java-lang-reflect-Proxy\" class=\"headerlink\" title=\"java.lang.reflect.Proxy\"></a>java.lang.reflect.Proxy</h1><h2 id=\"ä»£ç†ç±»çš„ç‰¹å¾\"><a href=\"#ä»£ç†ç±»çš„ç‰¹å¾\" class=\"headerlink\" title=\"ä»£ç†ç±»çš„ç‰¹å¾\"></a>ä»£ç†ç±»çš„ç‰¹å¾</h2><ul>\n<li>å¦‚æœè¢«ä»£ç†ç±»çš„æ‰€æœ‰æ¥å£éƒ½è¢«<code>public</code>ä¿®é¥°ï¼Œé‚£ä¹ˆä»£ç†ç±»é»˜è®¤è¢«<code>public</code>ã€<code>final</code>ä¿®é¥°ï¼›</li>\n<li>å¦‚æœè¢«ä»£ç†ç±»çš„ä»»æ„ä¸€ä¸ªæ¥å£æ²¡æœ‰<code>public</code>ä¿®é¥°ï¼Œé‚£ä¹ˆä»£ç†ç±»å°†ä¸ä¼šè¢«<code>public</code>ä¿®é¥°ï¼Œä½†ä¼šè¢«<code>final</code>ä¿®é¥°ï¼›</li>\n<li>æ‰€æœ‰çš„ä»£ç†ç±»éƒ½æ˜¯éæŠ½è±¡ç±»ï¼›</li>\n<li>ä»£ç†ç±»çš„ç±»åä»¥<code>$Proxy</code>å¼€å§‹ï¼›</li>\n<li>åŠ¨æ€ä»£ç†ç”Ÿæˆçš„ä»£ç†ç±»éƒ½ä¼šç»§æ‰¿<code>java.lang.reflect.Proxy</code>ï¼›</li>\n<li>ä»£ç†ç±»å®ç°äº†æ²¡æœ‰è¢«<code>public</code>ä¿®é¥°çš„æ¥å£ï¼Œé‚£ä¹ˆä»£ç†ç±»çš„åŒ…åå°†ä¸è¯¥æ¥å£åŒ…åä¿æŒä¸€è‡´ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¯¥ä»£ç†ç±»çš„åŒ…å<code>unspecified</code>ï¼ˆæ²¡æœ‰å…·ä½“è¯´æ˜ï¼‰ã€‚</li>\n<li>ä»£ç†ç±»ä¸è¢«ä»£ç†ç±»è°ƒç”¨<code>getInterfaces</code>å°†è¿”å›åŒæ ·çš„ç»“æœï¼›</li>\n<li>ä»£ç†ç±»è°ƒç”¨<code>getMethod</code>å°†è¿”å›æ‰€æœ‰æ¥å£çš„æ–¹æ³•ä»¥åŠç»§æ‰¿è‡ª<code>Object</code>å’Œ<code>Proxy</code>ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼›</li>\n<li><code>Proxy.isProxyClass</code>æ–¹æ³•ç”¨äºéªŒè¯è¯¥ä»£ç†ç±»æ˜¯å¦æ˜¯é€šè¿‡<code>Proxy.getProxyClass</code>æˆ–<code>Proxy.newProxyInstance</code>æ–¹æ³•è¿”å›çš„ç±»ï¼›</li>\n<li>åŠ¨æ€ä»£ç†æ‰€ç”Ÿæˆçš„ç±»çš„ä¿æŠ¤åŸŸä¸ç³»ç»Ÿç±»ï¼ˆæ¯”å¦‚Objectæˆ–å…¶ä»–BootstrapåŠ è½½çš„ç±»ï¼‰ä¸€è‡´ï¼Œéƒ½æ˜¯<code>AllPermission</code>ï¼›</li>\n<li>æ¯ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»éƒ½ä¼šæœ‰ä¸€ä¸ªå…¬æœ‰çš„åªæœ‰ä¸€ä¸ªå‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œè¿™ä¸ªå‚æ•°æ˜¯<code>InvocationHandler</code>çš„å®ç°ç±»ã€‚</li>\n</ul>\n<h2 id=\"ä»£ç†ç±»å®ä¾‹åŒ–å¯¹è±¡çš„ç‰¹å¾\"><a href=\"#ä»£ç†ç±»å®ä¾‹åŒ–å¯¹è±¡çš„ç‰¹å¾\" class=\"headerlink\" title=\"ä»£ç†ç±»å®ä¾‹åŒ–å¯¹è±¡çš„ç‰¹å¾\"></a>ä»£ç†ç±»å®ä¾‹åŒ–å¯¹è±¡çš„ç‰¹å¾</h2><ul>\n<li>ä»£ç†ç±»å¯¹è±¡å¯ä»¥æˆåŠŸè½¬æ¢ä¸ºè¢«ä»£ç†ç±»çš„æ¥å£ç±»å‹ï¼Œå¹¶ä¸”<code>instanceof</code>æ“ä½œç¬¦çš„ç»“æœä¹Ÿæ˜¯<code>true</code>ï¼›</li>\n<li>æ¯ä¸ªä»£ç†ç±»å¯¹è±¡éƒ½ä¼šæœ‰ç›¸å…³è”çš„<code>InvocationHandler</code>å®ç°ç±»ï¼Œè¯¥ä»£ç†ç±»ä½œä¸ºæ„é€ æ–¹æ³•å½¢å‚ï¼Œå¯ä»¥é€šè¿‡<code>Proxy.getInvocationHandler</code>æ–¹æ³•è·å¾—ï¼›<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> $<span class=\"token class-name\">Proxy0</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">InvocationHandler</span> handler<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>handler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li>ä»£ç†ç±»å¯¹è±¡è°ƒç”¨æ¥å£å†…çš„æ–¹æ³•æ—¶ï¼Œå®é™…è°ƒç”¨çš„æ˜¯ï¼ˆdispatchedï¼‰<code>InvocationHandler</code>ä¸­çš„<code>invoke</code>æ–¹æ³•ï¼›</li>\n<li>ä»£ç†ç±»å¯¹è±¡ç»§æ‰¿è‡ª<code>Object</code>ç±»çš„<code>hashCode</code>ã€<code>equals</code>å’Œ<code>toString</code>æ–¹æ³•ï¼Œä½¿ç”¨è¿™äº›æ–¹æ³•æ—¶ï¼Œå®é™…è°ƒç”¨çš„ä¹Ÿæ˜¯<code>InvocationHandler</code>ä¸­çš„<code>invoke</code>æ–¹æ³•ã€‚</li>\n</ul>\n<blockquote>\n<p>ä»¥ä¸Šå†…å®¹å‚è€ƒè‡ªOracle Java APIå®˜æ–¹æ–‡æ¡£ï¼š<br><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Proxy.html\">https://docs.oracle.com/javase/8/docs/api/java/lang/reflect/Proxy.html</a></p>\n</blockquote>\n<h1 id=\"åŠ¨æ€ä»£ç†demo\"><a href=\"#åŠ¨æ€ä»£ç†demo\" class=\"headerlink\" title=\"åŠ¨æ€ä»£ç†demo\"></a>åŠ¨æ€ä»£ç†demo</h1><h2 id=\"User\"><a href=\"#User\" class=\"headerlink\" title=\"User\"></a>User</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"UserMapper\"><a href=\"#UserMapper\" class=\"headerlink\" title=\"UserMapper\"></a>UserMapper</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">UserMapper</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">User</span> <span class=\"token function\">selectById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"CrudService\"><a href=\"#CrudService\" class=\"headerlink\" title=\"CrudService\"></a>CrudService</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CrudService</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">UserMapper</span> userMapper<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span> <span class=\"token function\">queryById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> userId<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        userMapper <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">UserMapper</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">.</span><span class=\"token function\">newProxyInstance</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">UserMapper</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">.</span><span class=\"token function\">getClassLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Class</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#123;</span> <span class=\"token class-name\">UserMapper</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> \n            <span class=\"token punctuation\">(</span>proxy<span class=\"token punctuation\">,</span> method<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> \n            <span class=\"token punctuation\">&#123;</span>\n                <span class=\"token comment\">// mock</span>\n                <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span><span class=\"token number\">10L</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Vincent\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Long</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">&#123;</span>\n                    <span class=\"token class-name\">Long</span> id <span class=\"token operator\">=</span> <span class=\"token class-name\">Long</span><span class=\"token punctuation\">.</span><span class=\"token function\">parseLong</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">&#123;</span>\n                        <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token punctuation\">&#125;</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> userMapper<span class=\"token punctuation\">.</span><span class=\"token function\">selectById</span><span class=\"token punctuation\">(</span><span class=\"token number\">10L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ä½¿ç”¨äº†<br><code>Proxy.newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler handler)</code>è·å–ä»£ç†å¯¹è±¡ã€‚</p>\n<ul>\n<li>loader - è¢«ä»£ç†ç±»æˆ–è¢«ä»£ç†æ¥å£çš„ç±»åŠ è½½å™¨</li>\n<li>interfaces - è¢«ä»£ç†ç±»æ‰€å®ç°æ¥å£çš„é›†åˆæˆ–è¢«ä»£ç†æ¥å£æ‰€ç»§æ‰¿çš„æ¥å£é›†åˆåŠå…¶æœ¬èº«</li>\n<li>handler - <code>InvocationHandler</code>æ¥å£çš„å®ç°ç±»ï¼Œä½œä¸ºä»£ç†ç±»æ„é€ æ–¹æ³•çš„å½¢å‚ï¼Œè¿”å›ä»£ç†ç±»çš„å®ä¾‹å¯¹è±¡ï¼›éœ€è¦é‡å†™<code>InvocationHandler</code>ä¸­çš„<code>invoke</code>æ–¹æ³•ï¼Œä½¿ç”¨ä»£ç†ç±»è°ƒç”¨æ–¹æ³•æ—¶å®é™…è°ƒç”¨çš„æ˜¯è¯¥<code>invoke</code>æ–¹æ³•ã€‚</li>\n</ul>\n<p><code>InvocationHandler</code>ä¸­çš„<code>invoke</code>æ–¹æ³•<br><code>invoke(Object proxy, Method method, Object[] args)</code></p>\n<ul>\n<li>proxy - ä»£ç†ç±»çš„å®ä¾‹åŒ–å¯¹è±¡ç”¨æ¥è°ƒç”¨æ–¹æ³•ï¼Œæ³¨æ„ï¼šä¸èƒ½åœ¨é‡å†™çš„<code>invoke</code>æ–¹æ³•ä¸­ä½¿ç”¨<code>proxy</code>è°ƒç”¨ä»»ä½•æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰é€’å½’åœæ­¢æ¡ä»¶ï¼Œä¼šå‡ºç°<code>StackOverflowError</code><blockquote>\n<p>ä¸ºä»€ä¹ˆä¼šå‡ºç°æ ˆæº¢å‡ºï¼Ÿ<br>å› ä¸ºä»£ç†ç±»å¯¹è±¡è°ƒç”¨ä»»ä½•æ–¹æ³•å®é™…ä¸Šè°ƒç”¨çš„éƒ½æ˜¯<code>InvocationHandler</code>ä¸­çš„<code>invoke</code>æ–¹æ³•ï¼Œæ‰€ä»¥ä½¿ç”¨<code>proxy</code>è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šå‡ºç°é€’å½’ï¼Œä»¥è‡´äºé€ æˆ<code>StackOverflowError</code></p>\n</blockquote>\n</li>\n<li>method - ä»£ç†ç±»å¯¹è±¡è°ƒç”¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚æœ¬ä¾‹ä¸­çš„<code>userMapper.selectById(10L)</code>ï¼Œé‚£ä¹ˆmethodå°±æ˜¯<code>selectById</code>æ–¹æ³•çš„å¯¹è±¡</li>\n<li>args - ä»£ç†ç±»è°ƒç”¨æ–¹æ³•ä¸­çš„å½¢å‚ï¼Œç”¨äºæ¥æ”¶ä¼ é€’è¿‡æ¥çš„å®å‚ï¼Œ<code>userMapper.selectById(10L)</code>ï¼Œ<code>args</code>æ¥æ”¶åˆ°çš„å°±æ˜¯<code>10L</code></li>\n</ul>\n<h2 id=\"MapperTest\"><a href=\"#MapperTest\" class=\"headerlink\" title=\"MapperTest\"></a>MapperTest</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MapperTest</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">CrudService</span> service <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CrudService</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> service<span class=\"token punctuation\">.</span><span class=\"token function\">queryById</span><span class=\"token punctuation\">(</span><span class=\"token number\">10L</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"æµ‹è¯•ç»“æœ\"><a href=\"#æµ‹è¯•ç»“æœ\" class=\"headerlink\" title=\"æµ‹è¯•ç»“æœ\"></a>æµ‹è¯•ç»“æœ</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">Vincent<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>JDKåŠ¨æ€ä»£ç†æ˜¯åŸºäºæ¥å£çš„ä»£ç†ï¼Œè¿™å°±æ„å‘³ç€ä»£ç†ç±»å¿…é¡»è¦å®ç°æ¥å£ï¼›é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä»£ç†æ¥å£ï¼Œmybatiså°±æ˜¯é‡‡ç”¨çš„è¿™ç§æ–¹å¼ã€‚</p>\n<h2 id=\"Proxyæºç \"><a href=\"#Proxyæºç \" class=\"headerlink\" title=\"$Proxyæºç \"></a>$Proxyæºç </h2><p>æœ¬ä¾‹ä¸­ä»£ç†ç±»æºç ï¼š</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> $<span class=\"token class-name\">Proxy0</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Proxy</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">UserMapper</span> <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Method</span> m0<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Method</span> m1<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Method</span> m2<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Method</span> m3<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> $<span class=\"token class-name\">Proxy0</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">InvocationHandler</span> var1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>var1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">static</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span>\n            m0 <span class=\"token operator\">=</span> <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"java.lang.Object\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hashCode\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            m1 <span class=\"token operator\">=</span> <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"java.lang.Object\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"equals\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"java.lang.Object\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            m2 <span class=\"token operator\">=</span> <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"java.lang.Object\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"toString\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            m3 <span class=\"token operator\">=</span> <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.github.design.dynamic_proxy.mapper.UserMapper\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"selectById\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"java.lang.Long\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">NoSuchMethodException</span> var2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NoSuchMethodError</span><span class=\"token punctuation\">(</span>var2<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">ClassNotFoundException</span> var3<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NoClassDefFoundError</span><span class=\"token punctuation\">(</span>var3<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> var1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Boolean</span><span class=\"token punctuation\">)</span><span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span>h<span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> m1<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#123;</span>var1<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">RuntimeException</span> <span class=\"token operator\">|</span> <span class=\"token class-name\">Error</span> var2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">throw</span> var2<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Throwable</span> var3<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UndeclaredThrowableException</span><span class=\"token punctuation\">(</span>var3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span><span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span>h<span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> m2<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">RuntimeException</span> <span class=\"token operator\">|</span> <span class=\"token class-name\">Error</span> var2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">throw</span> var2<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Throwable</span> var3<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UndeclaredThrowableException</span><span class=\"token punctuation\">(</span>var3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> <span class=\"token function\">hashCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">)</span><span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span>h<span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> m0<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">RuntimeException</span> <span class=\"token operator\">|</span> <span class=\"token class-name\">Error</span> var2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">throw</span> var2<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Throwable</span> var3<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UndeclaredThrowableException</span><span class=\"token punctuation\">(</span>var3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Lookup</span> <span class=\"token function\">proxyClassLookup</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Lookup</span> var0<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IllegalAccessException</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>var0<span class=\"token punctuation\">.</span><span class=\"token function\">lookupClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span> <span class=\"token operator\">&amp;&amp;</span> var0<span class=\"token punctuation\">.</span><span class=\"token function\">hasFullPrivilegeAccess</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token class-name\">MethodHandles</span><span class=\"token punctuation\">.</span><span class=\"token function\">lookup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalAccessException</span><span class=\"token punctuation\">(</span>var0<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">User</span> <span class=\"token function\">selectById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> var1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">)</span><span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span>h<span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> m3<span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#123;</span>var1<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">RuntimeException</span> <span class=\"token operator\">|</span> <span class=\"token class-name\">Error</span> var2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">throw</span> var2<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Throwable</span> var3<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UndeclaredThrowableException</span><span class=\"token punctuation\">(</span>var3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","åŠ¨æ€ä»£ç†"]},{"title":"Prototype Pattern","url":"/2021/12/14/Prototype-Pattern/","content":"<p>åŸå‹æ¨¡å¼æ˜¯é€šè¿‡æ‹·è´åˆ›å»ºå¯¹è±¡ï¼Œæœ¬è´¨å°±æ˜¯å¯¹è±¡çš„å¤åˆ¶ï¼Œåˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</p>\n<ul>\n<li>æµ…æ‹·è´ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ–°å¯¹è±¡ä¸­çš„å¼•ç”¨ç±»å‹ä»æŒ‡å‘åŸåœ°å€</li>\n<li>æ·±æ‹·è´ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ–°å¯¹è±¡ä¸­çš„å¼•ç”¨ç±»å‹ä¼šè¢«æ‹·è´åˆ°æ–°çš„åœ°å€</li>\n</ul>\n<p>æµ…æ‹·è´</p>\n<h1 id=\"User\"><a href=\"#User\" class=\"headerlink\" title=\"User\"></a>User</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Cloneable</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">String</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">String</span> pwd<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Adress</span> adress<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Adress</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">String</span> country<span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">String</span> province<span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">String</span> city<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">User</span> user <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span>\n            user <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">User</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">CloneNotSupportedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>æ·±æ‹·è´</p>\n<h1 id=\"Movie\"><a href=\"#Movie\" class=\"headerlink\" title=\"Movie\"></a>Movie</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Movie</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Cloneable</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">String</span> type<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Content</span> content<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Content</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Cloneable</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">String</span> duration<span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">String</span> dialogue<span class=\"token punctuation\">;</span>\n\n        <span class=\"token annotation punctuation\">@Override</span>\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\">Content</span> <span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token class-name\">Content</span> content <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">try</span>\n            <span class=\"token punctuation\">&#123;</span>\n                content <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Content</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CloneNotSupportedException</span> e<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n            <span class=\"token keyword\">return</span> content<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Movie</span> <span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">Movie</span> movie <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">try</span>\n        <span class=\"token punctuation\">&#123;</span>\n            movie <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Movie</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            movie<span class=\"token punctuation\">.</span>content <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Content</span><span class=\"token punctuation\">)</span> content<span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CloneNotSupportedException</span> e<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">return</span> movie<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","åˆ›å»ºå‹æ¨¡å¼"]},{"title":"Singleton Pattern","url":"/2021/12/07/Singleton-Pattern/","content":"<h1 id=\"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Ÿ\"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Ÿ</h1><p>å•ä¾‹æ¨¡å¼è§„å®šæŸä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹å¯¹è±¡ï¼ŒèŠ‚çœäº†ç³»ç»Ÿèµ„æºï¼›å„ç§æ± å­ï¼Œæ•°æ®åº“è¿æ¥æ± ã€çº¿ç¨‹æ± ç­‰éƒ½éœ€è¦ä½¿ç”¨å•ä¾‹æ¨¡å¼æ¥ç¡®ä¿ç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ªæ± å­å®ä¾‹ã€‚Springçš„IOCå®¹å™¨ä¹Ÿé‡‡ç”¨äº†å•ä¾‹æ¨¡å¼ç¡®ä¿å…¶ç®¡ç†çš„beanåªæœ‰ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡ã€‚</p>\n<h1 id=\"å¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼ï¼Ÿ\"><a href=\"#å¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼ï¼Ÿ\" class=\"headerlink\" title=\"å¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼ï¼Ÿ\"></a>å¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼ï¼Ÿ</h1><p>å•ä¾‹æ¨¡å¼çš„å®ç°é¦–å…ˆè¦ç¡®ä¿ä¸€ç‚¹å°±æ˜¯ä¸èƒ½<code>new</code>å¯¹è±¡ï¼Œå¦‚æœå¯ä»¥åœ¨ä»£ç ä¸­<code>new</code>å‡ºå¯¹è±¡çš„è¯ï¼Œé‚£å°±ä¸å«å•ä¾‹ï¼Œå› ä¸ºæ¯æ¬¡<code>new</code>éƒ½ä¼šåœ¨å †å†…å­˜ä¸­ç”³è¯·ç©ºé—´ï¼Œæ— æ³•ä¿è¯æ˜¯åŒä¸€å®ä¾‹ï¼Œæ‰€ä»¥è¦è®©æ„é€ æ–¹æ³•ç§æœ‰ï¼Œå³ä¸èƒ½<code>new</code>å‡ºå¯¹è±¡ã€‚<br><br>å…¶äºŒï¼šå› ä¸ºæ— æ³•<code>new</code>å‡ºå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥é€šè¿‡<code>å¯¹è±¡å.æ–¹æ³•å</code>è·å¾—å®ä¾‹åŒ–å¯¹è±¡ï¼Œéœ€è¦è®©è·å¾—å®ä¾‹åŒ–å¯¹è±¡çš„æ–¹æ³•å’Œä¿å­˜å®ä¾‹åŒ–å¯¹è±¡çš„æˆå‘˜å˜é‡é™æ€åŒ–ï¼Œè¿™æ ·å¯ä»¥<code>ç±»å.é™æ€æ–¹æ³•</code>è·å–å®ä¾‹åŒ–å¯¹è±¡ã€‚<br><br>å…¶ä¸‰ï¼šå¦‚æœéœ€è¦æ‡’åŠ è½½ï¼Œå¿…é¡»åŠ é”æˆ–è€…ä½¿ç”¨å†…éƒ¨ç±»/æšä¸¾ç±»å®ç°ï¼Œå¦åˆ™åœ¨å¤šçº¿ç¨‹ä¸‹ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜å¯¼è‡´è·å¾—ä¸åŒçš„å®ä¾‹åŒ–å¯¹è±¡ã€‚</p>\n<h1 id=\"å•ä¾‹æ¨¡å¼çš„ä¸åŒå®ç°\"><a href=\"#å•ä¾‹æ¨¡å¼çš„ä¸åŒå®ç°\" class=\"headerlink\" title=\"å•ä¾‹æ¨¡å¼çš„ä¸åŒå®ç°\"></a>å•ä¾‹æ¨¡å¼çš„ä¸åŒå®ç°</h1><h2 id=\"é¥¿æ±‰å¼å•ä¾‹\"><a href=\"#é¥¿æ±‰å¼å•ä¾‹\" class=\"headerlink\" title=\"é¥¿æ±‰å¼å•ä¾‹\"></a>é¥¿æ±‰å¼å•ä¾‹</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Singleton</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token comment\">// private constructor</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n    \n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Singleton</span> INSTANCE <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n  \t\t<span class=\"token keyword\">return</span> INSTANCE<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>è¿™æ˜¯æœ€ç®€å•çš„å•ä¾‹å®ç°æ–¹å¼ï¼Œå› ä¸ºJVMçš„ç±»åŠ è½½æœºåˆ¶ç¡®ä¿äº†ç±»åªä¼šè¢«åŠ è½½ä¸€æ¬¡ï¼Œæ‰€ä»¥<code>Singleton</code>åªä¼šè¢«<code>new</code>ä¸€æ¬¡ï¼Œä¸ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p>\n<h2 id=\"æ‡’æ±‰å¼å•ä¾‹\"><a href=\"#æ‡’æ±‰å¼å•ä¾‹\" class=\"headerlink\" title=\"æ‡’æ±‰å¼å•ä¾‹\"></a>æ‡’æ±‰å¼å•ä¾‹</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Singleton</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token comment\">// private constructor</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n    \n \t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> instance<span class=\"token punctuation\">;</span>\n    \n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span> <span class=\"token operator\">==</span> instance<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\tinstance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token keyword\">return</span> instance<span class=\"token punctuation\">;</span>        \n\t<span class=\"token punctuation\">&#125;</span>    \n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>æ‡’æ±‰å¼å•ä¾‹æ¨¡å¼ä¼šé€ æˆçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå½“æŸä¸ªçº¿ç¨‹åœ¨<code>if(null == singleton)</code>åˆ¤æ–­ä¸º<code>true</code>ä¹‹åï¼Œåœ¨è¿˜æ²¡æœ‰æ‰§è¡Œ<code>new</code>å¯¹è±¡çš„ä»£ç æ—¶ï¼ˆæˆ‘ä»¬æš‚ä¸”ç§°å®ƒä¸ºå°±ç»ªçº¿ç¨‹ï¼‰ï¼ŒCPUä¸€ä¸ªæ—¶é—´ç‰‡ç»“æŸï¼Œæ“ä½œç³»ç»Ÿè¿›è¡Œäº†ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œè¿™æ—¶å€™å…¶ä»–çº¿ç¨‹è¿›å…¥<code>new</code>äº†ä¸€ä¸ª<code>Singleton</code>å¯¹è±¡ï¼›ç„¶åå°±ç»ªçº¿ç¨‹åœ¨æŸæ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢åé‡æ–°è·å¾—äº†CPUæŒ‡ä»¤æƒåˆä¼š<code>new</code>å‡ºä¸€ä¸ªæ–°çš„<code>Singleton</code>å¯¹è±¡ï¼Œé€ æˆäº†çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ï¼ˆä¸¥æ ¼æ¥è¯´è¿™ç§æ–¹å¼åˆ›å»ºå‡ºæ¥çš„å¹¶ä¸æ˜¯å•ä¾‹æ¨¡å¼ï¼Œå› ä¸ºåœ¨å¤šçº¿ç¨‹ä¸‹ä¼šåˆ›å»ºå‡ºä¸¤ä¸ªå®ä¾‹ï¼‰</p>\n<h2 id=\"åŒé‡åŠ é”å•ä¾‹\"><a href=\"#åŒé‡åŠ é”å•ä¾‹\" class=\"headerlink\" title=\"åŒé‡åŠ é”å•ä¾‹\"></a>åŒé‡åŠ é”å•ä¾‹</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Singleton</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token comment\">// private constructor</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">volatile</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> instance<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span> <span class=\"token operator\">==</span> instance<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\t<span class=\"token keyword\">synchronized</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span> <span class=\"token operator\">==</span> instance<span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\t\t\tinstance <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">&#125;</span>\n\t\t\t<span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token keyword\">return</span> instance<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>åŒé‡åŠ é”å•ä¾‹æ˜¯åœ¨æ‡’æ±‰å¼å•ä¾‹çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡åœ¨ä»£ç å—ä¸­åŠ å…¥<code>synchronized</code>åŒæ­¥ç›‘è§†å™¨å¯¹è±¡æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚<br><br>è‡³äºä¸ºä»€ä¹ˆç”¨åŒæ­¥ä»£ç å—è€Œä¸ç”¨åŒæ­¥æ–¹æ³•ï¼Ÿ</p>\n<blockquote>\n<p>å¦‚æœä½¿ç”¨åŒæ­¥æ–¹æ³•ï¼Œæˆ‘æ¯æ¬¡<code>getInstance</code>éƒ½ä¼šæœ‰åŠ é”å’Œè§£é”ï¼Œè½å®åˆ°JVMä¸Šå°±ä¼šæ‰§è¡Œ<code>monitorenter</code>å’Œ<code>monitorexit</code>æŒ‡ä»¤ï¼Œé€ æˆæ€§èƒ½æŸå¤±ï¼›<br>é‚£ä¹ˆå¯ä¸å¯ä»¥åŠ è½½ç¬¬ä¸€ä¸ª<code>if</code>è¯­å¥å¤„å‘¢ï¼ŸåŠ åœ¨ç¬¬ä¸€ä¸ª<code>if</code>è¯­å¥å¤„åŒæ ·ä¼šé€ æˆæ€§èƒ½æŸå¤±ï¼Œå‡å¦‚æˆ‘å·²ç»<code>new</code>å‡ºäº†è¿™ä¸ªå•ä¾‹ï¼Œä½†æ¯æ¬¡è°ƒç”¨<code>getInstance</code>åœ¨ç¬¬ä¸€ä¸ª<code>if</code>åˆ¤æ–­å¤„åŒæ ·ä¼šç»å†åŠ é”å’Œè§£é”ï¼Œé€ æˆæ€§èƒ½æŸå¤±ã€‚</p>\n</blockquote>\n<h2 id=\"é™æ€å†…éƒ¨ç±»å•ä¾‹\"><a href=\"#é™æ€å†…éƒ¨ç±»å•ä¾‹\" class=\"headerlink\" title=\"é™æ€å†…éƒ¨ç±»å•ä¾‹\"></a>é™æ€å†…éƒ¨ç±»å•ä¾‹</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Singleton</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token comment\">// private constructor</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\n\n\t<span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">InnerClass</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Singleton</span> INSTANCE <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Singleton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Singleton</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token class-name\">InnerClass</span><span class=\"token punctuation\">.</span>INSTANCE<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>é™æ€å†…éƒ¨ç±»åªæœ‰åœ¨è°ƒç”¨çš„æ—¶å€™æ‰ä¼šè¢«JVMåŠ è½½ï¼Œè€Œä¸”åªä¼šè¢«åŠ è½½ä¸€æ¬¡ï¼Œç¡®ä¿äº†çº¿ç¨‹å®‰å…¨é—®é¢˜å’Œå®ç°äº†æ‡’åŠ è½½(LazyLoading)ã€‚</p>\n<h2 id=\"æšä¸¾å•ä¾‹\"><a href=\"#æšä¸¾å•ä¾‹\" class=\"headerlink\" title=\"æšä¸¾å•ä¾‹\"></a>æšä¸¾å•ä¾‹</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">enum</span> <span class=\"token class-name\">Singleton</span>\n<span class=\"token punctuation\">&#123;</span>\n\tINSTANCE<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p>å› ä¸ºæšä¸¾ç±»çš„ç‰¹ç‚¹ï¼Œæ‰€ä»¥å®ç°å•ä¾‹æ¥éå¸¸ç®€å•ã€‚</p>\n<blockquote>\n<p>æšä¸¾ç±»çš„æ„é€ å™¨æ˜¯ç§æœ‰çš„ï¼›<br>æšä¸¾ç±»çš„æˆå‘˜å˜é‡é»˜è®¤è¢«<code>public static final</code>ä¿®é¥°ï¼›<br>æšä¸¾ç±»å…¶å®æ˜¯æŠ½è±¡ç±»ï¼Œæˆå‘˜å˜é‡æ˜¯åœ¨é™æ€ä»£ç å—ä¸­è¢«å®ä¾‹åŒ–çš„ï¼›<br>æšä¸¾ç±»çš„å®ç°åŸç†æ˜¯æŠ½è±¡ç±»ç»§æ‰¿EnumæŠ½è±¡ç±»ï¼Œæ‰€ä»¥åå°„æ— æ³•åˆ›å»ºå‡ºæšä¸¾ç±»çš„å¯¹è±¡ã€‚</p>\n</blockquote>\n<p>æšä¸¾ç±»ä¸ºä»€ä¹ˆå¯ä»¥é˜²æ­¢ååºåˆ—åŒ–æ”»å‡»ï¼Ÿ<br><br>æ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥é˜…è¯»ä»¥ä¸‹Oracleçš„æ–‡æ¡£</p>\n<blockquote>\n<p>1.12 Serialization of Enum Constants<br>Enum constants are serialized differently than ordinary serializable or externalizable objects. The serialized form of an enum constant consists solely of its name; field values of the constant are not present in the form. To serialize an enum constant, ObjectOutputStream writes the value returned by the enum constantâ€™s name method. To deserialize an enum constant, ObjectInputStream reads the constant name from the stream; the deserialized constant is then obtained by calling the java.lang.Enum.valueOf method, passing the constantâ€™s enum type along with the received constant name as arguments. Like other serializable or externalizable objects, enum constants can function as the targets of back references appearing subsequently in the serialization stream.</p>\n</blockquote>\n<blockquote>\n<p>The process by which enum constants are serialized cannot be customized: any class-specific writeObject, readObject, readObjectNoData, writeReplace, and readResolve methods defined by enum types are ignored during serialization and deserialization. Similarly, any serialPersistentFields or serialVersionUID field declarations are also ignoredâ€“all enum types have a fixed serialVersionUID of 0L. Documenting serializable fields and data for enum types is unnecessary, since there is no variation in the type of data sent.</p>\n</blockquote>\n<p>æ–‡æ¡£åœ°å€ï¼š<a href=\"https://docs.oracle.com/javase/1.5.0/docs/guide/serialization/spec/serial-arch.html#enum\">https://docs.oracle.com/javase/1.5.0/docs/guide/serialization/spec/serial-arch.html#enum</a></p>\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","åˆ›å»ºå‹æ¨¡å¼"]},{"title":"Memento Pattern","url":"/2021/12/15/Memento-Pattern/","content":"<p>å¤‡å¿˜å½•æ¨¡å¼åº”ç”¨å¹¿æ³›ï¼Œmysql undoæ—¥å¿—ï¼Œæ¸¸æˆå­˜æ¡£ï¼Œç‰ˆæœ¬æ§åˆ¶ï¼Œå…¶å®å°±æ˜¯å°†ç›®å‰å¯¹è±¡ä¸­çš„æ•°æ®ä¿å­˜èµ·æ¥ï¼Œåœ¨éœ€è¦çš„æ—¶å€™å¯ä»¥æ ¹æ®éœ€æ±‚å›æ»šæˆ–å…¶ä»–æ“ä½œã€‚<br><br>åœ¨æ¸¸ç©é»‘æš—ä¹‹é­‚æ—¶ï¼Œåœ¨å‡»æ€BOSSå‰å¦‚æœæ²¡æœ‰åè¶³çš„æŠŠæ¡ï¼Œæœ€å¥½è¿˜æ˜¯ä¿å­˜ä¸‹å­˜æ¡£ï¼Œå¦åˆ™è¾›è¾›è‹¦è‹¦æ”’ä¸‹æ¥çš„é­‚éƒ½å°†ä»˜ä¹‹ä¸œæµã€‚</p>\n<h1 id=\"DarkSouls\"><a href=\"#DarkSouls\" class=\"headerlink\" title=\"DarkSouls\"></a>DarkSouls</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DarkSouls</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Cloneable</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">String</span> territory<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">String</span> time<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">String</span> souls<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">DarkSouls</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> territory<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> time<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> souls<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>territory <span class=\"token operator\">=</span> territory<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>time <span class=\"token operator\">=</span> time<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>souls <span class=\"token operator\">=</span> souls<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">fight</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> level<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>level <span class=\"token operator\">&lt;</span> <span class=\"token number\">35</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>territory <span class=\"token operator\">=</span> <span class=\"token string\">\"ä¼Šé²å¸­å°”åœ°ç‰¢\"</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>time <span class=\"token operator\">=</span> <span class=\"token string\">\"19:40:00\"</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>souls <span class=\"token operator\">=</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ²¡æ‰“è¿‡æ— åä¹‹ç‹ï¼ï¼ï¼\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">else</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å‡»è´¥äº†æ— åä¹‹ç‹ï¼ï¼ï¼\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">DarkSouls</span> <span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token class-name\">DarkSouls</span> clone <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">DarkSouls</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">// TODO: copy mutable state here, so the clone can't change the internals of the original</span>\n            <span class=\"token keyword\">return</span> clone<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">CloneNotSupportedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AssertionError</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h1 id=\"Archive\"><a href=\"#Archive\" class=\"headerlink\" title=\"Archive\"></a>Archive</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Archive</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">DarkSouls</span> darkSouls<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">int</span> num<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Archive</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">DarkSouls</span> darkSouls<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>darkSouls <span class=\"token operator\">=</span> darkSouls<span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">DarkSouls</span> <span class=\"token function\">getDarkSouls</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>darkSouls<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h1 id=\"SavePage\"><a href=\"#SavePage\" class=\"headerlink\" title=\"SavePage\"></a>SavePage</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SavePage</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Archive</span><span class=\"token punctuation\">></span></span> archives <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ä¿å­˜å­˜æ¡£</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Archive</span> archive<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>archives<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>archive<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token comment\">// åŠ è½½æŒ‡å®šä½ç½®å­˜æ¡£</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Archive</span> <span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> num<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>archives<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","è¡Œä¸ºå‹æ¨¡å¼"]},{"title":"Socketå®ç°åŒç«¯é€šä¿¡","url":"/2021/12/28/Socket%E5%AE%9E%E7%8E%B0%E5%8F%8C%E7%AB%AF%E9%80%9A%E4%BF%A1/","content":"<p>ä½¿ç”¨Socketå®ç°å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šä¿¡</p>\n<h1 id=\"Client\"><a href=\"#Client\" class=\"headerlink\" title=\"Client\"></a>Client</h1><pre class=\"line-numbers language-c\" data-language=\"c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;Windows.h></span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\"><span class=\"token function\">comment</span><span class=\"token punctuation\">(</span>lib<span class=\"token punctuation\">,</span> </span><span class=\"token string\">\"ws2_32.lib\"</span><span class=\"token expression\"><span class=\"token punctuation\">)</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">IP_ADDR</span> <span class=\"token string\">\"192.168.88.25\"</span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">Port</span> <span class=\"token expression\"><span class=\"token number\">8080</span></span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> argc<span class=\"token punctuation\">,</span> <span class=\"token keyword\">char</span><span class=\"token operator\">*</span> argv<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n    WSADATA s<span class=\"token punctuation\">;</span>\n    SOCKET ClientSocket<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">struct</span> <span class=\"token class-name\">sockaddr_in</span> ClientAddr<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">int</span> ret <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">char</span> SendBuffer<span class=\"token punctuation\">[</span>MAX_PATH<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">WSAStartup</span><span class=\"token punctuation\">(</span><span class=\"token function\">MAKEWORD</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>s<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Init Windows Socket Failed! Error: %d\\n\"</span><span class=\"token punctuation\">,</span> GetLastError<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">getchar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token punctuation\">&#125;</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ul>\n<li>WSADATAï¼šwinsock.hä¸‹å®šä¹‰ç”¨äºå­˜æ”¾socketåˆå§‹åŒ–ä¿¡æ¯çš„ç»“æ„ä½“</li>\n<li>SOCKETï¼š</li>\n</ul>\n","categories":["ç½‘ç»œç¼–ç¨‹","C"],"tags":["socketç¼–ç¨‹"]},{"title":"Proxy Pattern","url":"/2021/12/09/Proxy-Pattern/","content":"<h2 id=\"Traffic\"><a href=\"#Traffic\" class=\"headerlink\" title=\"Traffic\"></a>Traffic</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Traffic</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RealTraffic</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Traffic</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"search in google.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ProxyTraffic</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Traffic</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Traffic</span> realTraffic <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RealTraffic</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    pulic <span class=\"token keyword\">void</span> <span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            realTraffic<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"proxy server connected.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        retrun <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>ç°åœ¨æˆ‘ä»¬æ‹¥æœ‰äº†<code>RealTraffic</code>ç±»å’Œ<code>ProxyTraffic</code>ç±»ï¼ŒæŒ¡åœ¨æˆ‘ä»¬é¢å‰çš„æœ‰ä¸€ä¸ªè¿‡æ»¤å™¨</p>\n<h2 id=\"Filter\"><a href=\"#Filter\" class=\"headerlink\" title=\"Filter\"></a>Filter</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TrafficFilter</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Traffic</span> traffic<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>traffic <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">RealTraffic</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pass through filter.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RuntimeException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TrafficException\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">Traffic</span> traffic <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RealTraffic</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span>traffic<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            traffic<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>è¿™ä¸ªè¿‡æ»¤å™¨éå¸¸çƒ¦äººï¼Œä½†å®ƒåˆæ˜¯æ•´ä¸ªç¨‹åºçš„å…¥å£ï¼Œå¦‚æœ<code>doFilter()</code>è¿”å›falseçš„è¯ï¼Œæˆ‘ä»¬å°†æ— æ³•æ‰§è¡Œä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œä»£ç†ç±»è¿™æ—¶å€™å°±éå¸¸é‡è¦äº†ï¼Œæˆ‘ä»¬å°†<code>traffic</code>çš„å¼•ç”¨æ›´æ”¹ä¸º<code>ProxyTraffic</code>å¯¹è±¡ã€‚</p>\n<pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">Traffic</span> traffic <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ProxyTraffic</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">doFilter</span><span class=\"token punctuation\">(</span>traffic<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            traffic<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬çš„ä¸šåŠ¡ä»£ç å°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†ã€‚<br></p>\n<blockquote>\n<p>ä»£ç†æ¨¡å¼æ˜¯ä½¿ç”¨ä»£ç†ç±»å¯¹è¢«ä»£ç†ç±»è¿›è¡Œå°è£…ï¼Œé€šè¿‡ä»£ç†ç±»æ¥æ§åˆ¶å¯¹è¢«ä»£ç†ç±»çš„è®¿é—®ã€‚å°±æ‹¿ä¸Šé¢çš„ä¾‹å­æ¥è®²ï¼Œ<code>RealTraffic</code>ä¸èƒ½é€šè¿‡è¿‡æ»¤å™¨è¿‡æ»¤ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ— æ³•<code>search in google.</code>ã€‚è¿™ä¸ªæ—¶å€™ä¸é€‚åˆä½¿ç”¨<code>RealTraffic</code>ç±»ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶å°è£…ä¸ºäº†<code>ProxyTraffic</code>ç±»æ¥é¿å…è¢«è¿‡æ»¤å™¨è¿‡æ»¤ã€‚</p>\n</blockquote>\n<p>controllerã€serviceã€daoåŒæ ·å±äºä»£ç†æ¨¡å¼ï¼Œserviceä»£ç†daoï¼Œcontrollerä»£ç†serviceã€‚</p>\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","ç»“æ„å‹æ¨¡å¼"]},{"title":"Observer Pattern","url":"/2021/12/10/Observer-Pattern/","content":"<p>åœ¨æ”¯ä»˜çš„çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæ¥ç¡®ä¿å•†å“ä»·æ ¼æ˜¯æœ€æ–°çš„ã€‚</p>\n<h2 id=\"Goods\"><a href=\"#Goods\" class=\"headerlink\" title=\"Goods\"></a>Goods</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Goods</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">int</span> stock <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">BigDecimal</span> price <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BigDecimal</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"3000.0\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"Observer\"><a href=\"#Observer\" class=\"headerlink\" title=\"Observer\"></a>Observer</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Observer</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">watch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PriceObserver</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Observer</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">watch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> obj<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>obj <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Goods</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token class-name\">Goods</span> goods <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Goods</span><span class=\"token punctuation\">)</span>obj<span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// from sql</span>\n            <span class=\"token class-name\">BigDecimal</span> currentPrice <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BigDecimal</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"3200.0\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>goods<span class=\"token punctuation\">.</span>price<span class=\"token punctuation\">.</span><span class=\"token function\">compareTo</span><span class=\"token punctuation\">(</span>currentPrice<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">&#123;</span>\n                goods<span class=\"token punctuation\">.</span>price <span class=\"token operator\">=</span> currentPrice<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"Active\"><a href=\"#Active\" class=\"headerlink\" title=\"Active\"></a>Active</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Active</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Observer</span><span class=\"token punctuation\">></span></span> observers <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Observer</span> observer<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        observers<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>observer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Pay</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Active</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">act</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> obj<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>           \n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Observer</span> observer <span class=\"token operator\">:</span> observers<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            observer<span class=\"token punctuation\">.</span><span class=\"token function\">watch</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>ä¸€èˆ¬å¼€å‘ä¸­é‡åˆ°çš„<code>Listener</code>ï¼Œ<code>Hook</code>ï¼ˆä¾‹å¦‚vueç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼‰éƒ½æ˜¯è§‚å¯Ÿè€…æ¨¡å¼å®ç°çš„ï¼Œä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥å®ç°å“åº”å¼ç¼–ç¨‹ã€‚<br><br>è§‚å¯Ÿè€…æ¨¡å¼è¿˜å¯ä»¥ä¸è´£ä»»é“¾ç»“åˆï¼Œè§‚å¯Ÿè€…ç»„æˆè´£ä»»é“¾å»å¤„ç†è¯·æ±‚æˆ–å“åº”ã€‚<br><br>UIç•Œé¢å¼€å‘ä¸æ¸¸æˆå¼€å‘ä¹Ÿå¤§é‡ä½¿ç”¨äº†è§‚å¯Ÿè€…æ¨¡å¼æˆ–å‘å¸ƒ/è®¢é˜…æ¨¡å¼ï¼ˆåŠ å¼ºç‰ˆçš„è§‚å¯Ÿè€…æ¨¡å¼ï¼‰ï¼Œæœ‰ä¸ªæœ¯è¯­å«åš<code>äº‹ä»¶é©±åŠ¨æ¨¡å‹</code>ï¼Œå…¶æ ¸å¿ƒå°±æ˜¯é‡‡ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚</p>\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","è¡Œä¸ºå‹æ¨¡å¼"]},{"title":"TemplateMethod Pattern","url":"/2021/12/17/TemplateMethod-Pattern/","content":"<p>æ¨¡æ¿æ–¹æ³•é€šè¿‡æŠ½è±¡ç±»å®šä¹‰æ–¹æ³•ï¼Œç„¶ååœ¨éœ€è¦æ—¶å®ç°ç±»å¯ä»¥æ ¹æ®â€œæ¨¡æ¿â€å»å…·ä½“å®ç°æ‰€éœ€çš„åŠŸèƒ½ã€‚</p>\n<h1 id=\"Bootstrap\"><a href=\"#Bootstrap\" class=\"headerlink\" title=\"Bootstrap\"></a>Bootstrap</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Bootstrap</span>\n<span class=\"token punctuation\">&#123;</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">before</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">after</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token function\">before</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">after</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h1 id=\"DefaultBoot\"><a href=\"#DefaultBoot\" class=\"headerlink\" title=\"DefaultBoot\"></a>DefaultBoot</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">DefaultBoot</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Bootstrap</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">before</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åˆå§‹åŒ–ä¹‹å‰ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åˆå§‹åŒ–æ–¹æ³•ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">after</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åˆå§‹åŒ–ä¹‹åã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h1 id=\"TemplateTest\"><a href=\"#TemplateTest\" class=\"headerlink\" title=\"TemplateTest\"></a>TemplateTest</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TemplateTest</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">Bootstrap</span> boot <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DefaultBoot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        boot<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","è¡Œä¸ºå‹æ¨¡å¼"]},{"title":"Visitor Pattern","url":"/2021/12/12/Visitor-Pattern/","content":"<p>è®¿é—®è€…æ¨¡å¼ç”¨äºç»“æ„å›ºå®šçš„æ•°æ®ç»“æ„ï¼Œä¸‹é¢é€šè¿‡redisé›†ç¾¤æ¨¡å¼æ¥å­¦ä¹ è®¿é—®è€…æ¨¡å¼</p>\n<h2 id=\"Master\"><a href=\"#Master\" class=\"headerlink\" title=\"Master\"></a>Master</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Master</span> \n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">String</span> snapShot<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Master</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> snapShot<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>snapShot <span class=\"token operator\">=</span> snapShot<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Slave</span> slave<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        slave<span class=\"token punctuation\">.</span><span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MasterOne</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Master</span> \n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MasterOne</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> snapShot<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MASTER_ONE\"</span><span class=\"token punctuation\">,</span> snapShot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MasterTwo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Master</span> \n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MasterTwo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> snapShot<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MASTER_TWO\"</span><span class=\"token punctuation\">,</span> snapShot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MasterThree</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Master</span> \n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MasterThree</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> snapShot<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MASTER_THREE\"</span><span class=\"token punctuation\">,</span> snapShot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"Slave\"><a href=\"#Slave\" class=\"headerlink\" title=\"Slave\"></a>Slave</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Slave</span> \n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">String</span> data<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Slave</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">receive</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Master</span> master<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> master<span class=\"token punctuation\">.</span>snapShot<span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä»æœº \"</span> <span class=\"token operator\">+</span> name <span class=\"token operator\">+</span> <span class=\"token string\">\" ä»ä¸»æœº \"</span> <span class=\"token operator\">+</span> master<span class=\"token punctuation\">.</span>name <span class=\"token operator\">+</span> <span class=\"token string\">\" æ¥æ”¶åˆ°çš„æ•°æ®ä¸ºï¼š\"</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SlaveOne</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Slave</span> \n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SlaveOne</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SlaveTwo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Slave</span> \n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SlaveTwo</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SlaveThree</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Slave</span> \n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SlaveThree</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">)</span> \n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"Sync\"><a href=\"#Sync\" class=\"headerlink\" title=\"Sync\"></a>Sync</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Sync</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Master</span><span class=\"token punctuation\">></span></span> masters <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">attach</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Master</span> master<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        masters<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>master<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">sync</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Slave</span> slave<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Master</span> master <span class=\"token operator\">:</span> masters<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            master<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>slave<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"ClusterTest\"><a href=\"#ClusterTest\" class=\"headerlink\" title=\"ClusterTest\"></a>ClusterTest</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ClusterTest</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">Sync</span> sync1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Sync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Sync</span> sync2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Sync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Sync</span> sync3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Sync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        sync1<span class=\"token punctuation\">.</span><span class=\"token function\">attach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MasterOne</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SNAPSHOT_01\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        sync2<span class=\"token punctuation\">.</span><span class=\"token function\">attach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MasterTwo</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SNAPSHOT_02\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        sync3<span class=\"token punctuation\">.</span><span class=\"token function\">attach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">MasterThree</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"SNAPSHOT_03\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        sync1<span class=\"token punctuation\">.</span><span class=\"token function\">sync</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">SlaveOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        sync2<span class=\"token punctuation\">.</span><span class=\"token function\">sync</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">SlaveTwo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        sync3<span class=\"token punctuation\">.</span><span class=\"token function\">sync</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">SlaveThree</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h3 id=\"æµ‹è¯•ç»“æœ\"><a href=\"#æµ‹è¯•ç»“æœ\" class=\"headerlink\" title=\"æµ‹è¯•ç»“æœ\"></a>æµ‹è¯•ç»“æœ</h3><pre class=\"line-numbers language-none\"><code class=\"language-none\">ä»æœº SLAVE_ONE ä»ä¸»æœº MASTER_ONE æ¥æ”¶åˆ°çš„æ•°æ®ä¸ºï¼šSNAPSHOT_01\nä»æœº SLAVE_TWO ä»ä¸»æœº MASTER_TWO æ¥æ”¶åˆ°çš„æ•°æ®ä¸ºï¼šSNAPSHOT_02\nä»æœº SLAVE_THREE ä»ä¸»æœº MASTER_THREE æ¥æ”¶åˆ°çš„æ•°æ®ä¸ºï¼šSNAPSHOT_03<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œ<code>Slave</code>ç›¸å½“äº<code>Visitor</code>ï¼Œ<code>Master</code>ç›¸å½“äº<code>Element</code>ï¼Œ<code>Sync</code>ç›¸å½“äº<code>ObjectStructure </code>ã€‚</p>\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","è¡Œä¸ºå‹æ¨¡å¼"]},{"title":"State Pattern","url":"/2021/12/17/State-Pattern/","content":"<p>çŠ¶æ€æ¨¡å¼æ˜¯æ ¹æ®å¯¹è±¡çŠ¶æ€æ¥åŠ¨æ€çš„æ›´æ”¹ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸º</p>\n<p>å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªåä¸ºã€Šæˆ˜äº‰æ¨¡æ‹Ÿå™¨ã€‹çš„æ¸¸æˆï¼Œåœ¨è¿™ä¸ªæ¸¸æˆä¸­ä½ å¯ä»¥æ ¹æ®ä¸åŒçš„å‘å±•çŠ¶æ€æ¥æ¨¡æ‹Ÿä¸åŒæ—¶ä»£çš„æˆ˜äº‰ã€‚</p>\n<h1 id=\"WarState\"><a href=\"#WarState\" class=\"headerlink\" title=\"WarState\"></a>WarState</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">WarState</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">battle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">WWIstate</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">WarState</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">battle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç»è‚‰æœºã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">WWIIstate</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">WarState</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">battle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"è£…ç”²é›†ç¾¤æ­£é¢åˆšã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">GulfWar</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">WarState</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">battle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä¿¡æ¯åŒ–ä½œæˆ˜ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span> <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>é€šè¿‡ä¸åŒçš„<code>WarState</code>æ¥æ‰§è¡Œä¸åŒçš„æˆ˜äº‰ç­–ç•¥ï¼Œå…¶å®çŠ¶æ€æ¨¡å¼ä¸ç­–ç•¥æ¨¡å¼æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ã€‚è€Œç­–ç•¥æ¨¡å¼ä¾§é‡äºè°ƒç”¨è€…ç»™å®šä¸åŒçš„ç­–ç•¥äº§ç”Ÿä¸åŒçš„è¡Œä¸ºï¼ŒçŠ¶æ€æ¨¡å¼ä¾§é‡äºæ ¹æ®ä¸åŒçš„çŠ¶æ€è€Œäº§ç”Ÿä¸åŒçš„è¡Œä¸ºï¼Œè¿™å°±æ„å‘³ç€å¯¹è±¡å†…éƒ¨ä¼šæœ‰çŠ¶æ€ä½å­˜åœ¨ã€‚</p>\n<h1 id=\"AtWar\"><a href=\"#AtWar\" class=\"headerlink\" title=\"AtWar\"></a>AtWar</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">AtWar</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">WarState</span> warState<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">AtWar</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">WarState</span> warState<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>warState <span class=\"token operator\">=</span> warState<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">warfare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        warState<span class=\"token punctuation\">.</span><span class=\"token function\">battle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<h1 id=\"StateTest\"><a href=\"#StateTest\" class=\"headerlink\" title=\"StateTest\"></a>StateTest</h1><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">StateTest</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">AtWar</span> war <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AtWar</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">GulfWar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        war<span class=\"token punctuation\">.</span><span class=\"token function\">warfare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n\n\n\n\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","è¡Œä¸ºå‹æ¨¡å¼"]},{"title":"Strategy Pattern","url":"/2021/12/07/Strategy-Pattern/","content":"<h2 id=\"æ¸¸æˆç­–ç•¥æ¥å£\"><a href=\"#æ¸¸æˆç­–ç•¥æ¥å£\" class=\"headerlink\" title=\"æ¸¸æˆç­–ç•¥æ¥å£\"></a>æ¸¸æˆç­–ç•¥æ¥å£</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">GameStrategy</span>\n<span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">void</span> <span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"ç­–ç•¥æ¥å£å®ç°ç±»\"><a href=\"#ç­–ç•¥æ¥å£å®ç°ç±»\" class=\"headerlink\" title=\"ç­–ç•¥æ¥å£å®ç°ç±»\"></a>ç­–ç•¥æ¥å£å®ç°ç±»</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">EasyAi</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">GameStrategy</span>\n<span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Easy Ai player.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">NormalAi</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">GameStrategy</span>\n<span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Normal Ai player.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HardAi</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">GameStrategy</span>\n<span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hard Ai player.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"æ¸¸æˆéš¾åº¦é€‰æ‹©å™¨\"><a href=\"#æ¸¸æˆéš¾åº¦é€‰æ‹©å™¨\" class=\"headerlink\" title=\"æ¸¸æˆéš¾åº¦é€‰æ‹©å™¨\"></a>æ¸¸æˆéš¾åº¦é€‰æ‹©å™¨</h2><pre class=\"line-numbers language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Selector</span>\n<span class=\"token punctuation\">&#123;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">GameStrategy</span> strategy<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">Selector</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">GameStrategy</span> strategy<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>strategy <span class=\"token operator\">=</span> strategy<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">&#123;</span>\n    strategy<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>é€šè¿‡ç»™å®šä¸åŒçš„ç­‰çº§ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŒ‘é€‰æƒ³è¦çš„æ¸¸æˆéš¾åº¦ï¼Œç­–ç•¥æ¨¡å¼çš„åº”ç”¨åœºæ™¯éå¸¸ä¹‹å¤šï¼Œæ¯”å¦‚Springåœ¨å®ä¾‹åŒ–beanç­–ç•¥InstantiateStrategyã€‚<br><br>å·¥å‚æ¨¡å¼ä¹Ÿå¯ä»¥çœ‹ä½œä¸€ç§ç‰¹æ®Šçš„ç­–ç•¥æ¨¡å¼ï¼Œç»™ä¸åŒçš„å‚æ•°è·å–ä¸åŒçš„beanå¯¹è±¡ï¼Œåªä¸è¿‡å·¥å‚æ¨¡å¼å·²ç»æå‰<code>new</code>å¥½äº†å¯¹è±¡ï¼Œæ‰€ä»¥å·¥å‚æ¨¡å¼å±äºå»ºé€ è€…æ¨¡å¼ï¼Œè€Œç­–ç•¥æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚</p>\n","categories":["Java"],"tags":["è®¾è®¡æ¨¡å¼","è¡Œä¸ºå‹æ¨¡å¼"]}]